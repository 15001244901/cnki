/*
 Use it if you like it
*/
(function(){var j={r:function(k){if(j[k].inited)return j[k].value;if("function"===typeof j[k].value){var l={exports:{}},d=j[k].value(null,l.exports,l);j[k].inited=!0;j[k].value=d;if(void 0!==d)return d;for(var f in l.exports)if(l.exports.hasOwnProperty(f))return j[k].inited=!0,j[k].value=l.exports}else return j[k].inited=!0,j[k].value},"0":{value:function(){function k(d){this.ok=!1;"#"==d.charAt(0)&&(d=d.substr(1,6));var d=d.replace(/ /g,""),d=d.toLowerCase(),a={aliceblue:"f0f8ff",antiquewhite:"faebd7",
aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",
darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",
indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",
mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",
papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",
wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"},b;for(b in a)d==b&&(d=a[b]);var e=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(a){return[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(a){return[parseInt(a[1]+
a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}}];for(b=0;b<e.length;b++){var c=e[b].process,n=e[b].re.exec(d);n&&(channels=c(n),this.r=channels[0],this.g=channels[1],this.b=channels[2],this.ok=!0)}this.r=0>this.r||isNaN(this.r)?0:255<this.r?255:this.r;this.g=0>this.g||isNaN(this.g)?0:255<this.g?255:this.g;this.b=0>this.b||isNaN(this.b)?0:255<this.b?255:this.b;this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"};this.toHex=function(){var a=this.r.toString(16),c=this.g.toString(16),
e=this.b.toString(16);1==a.length&&(a="0"+a);1==c.length&&(c="0"+c);1==e.length&&(e="0"+e);return"#"+a+c+e};this.getHelpXML=function(){for(var c=[],b=0;b<e.length;b++)for(var n=e[b].example,d=0;d<n.length;d++)c[c.length]=n[d];for(var f in a)c[c.length]=f;n=document.createElement("ul");n.setAttribute("id","rgbcolor-examples");for(b=0;b<c.length;b++)try{var g=document.createElement("li"),h=new k(c[b]),j=document.createElement("div");j.style.cssText="margin: 3px; border: 1px solid black; background:"+
h.toHex()+"; color:"+h.toHex();j.appendChild(document.createTextNode("test"));var l=document.createTextNode(" "+c[b]+" -> "+h.toRGB()+" -> "+h.toHex());g.appendChild(j);g.appendChild(l);n.appendChild(g)}catch(p){}return n}}function j(h,a,b,e,c,n){if(!(isNaN(n)||1>n)){var n=n|0,h=document.getElementById(h).getContext("2d"),m;try{try{m=h.getImageData(a,b,e,c)}catch(R){try{netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserRead"),m=h.getImageData(a,b,e,c)}catch(I){throw alert("Cannot access local image"),
Error("unable to access local image data: "+I);}}}catch(k){throw alert("Cannot access image"),Error("unable to access image data: "+k);}var l=m.data,H,z,o,q,p,x,t,u,v,w,J,K,L,M,A,B,C,D,E,F,G,s,N;H=n+n+1;var T=e-1,U=c-1,y=n+1,O=y*(y+1)/2,S=new d,r=S;for(o=1;o<H;o++)if(r=r.next=new d,o==y)var V=r;r.next=S;r=o=null;x=p=0;var P=f[n],Q=g[n];for(z=0;z<c;z++){A=B=C=D=t=u=v=w=0;J=y*(E=l[p]);K=y*(F=l[p+1]);L=y*(G=l[p+2]);M=y*(s=l[p+3]);t+=O*E;u+=O*F;v+=O*G;w+=O*s;r=S;for(o=0;o<y;o++)r.r=E,r.g=F,r.b=G,r.a=
s,r=r.next;for(o=1;o<y;o++)q=p+((T<o?T:o)<<2),t+=(r.r=E=l[q])*(N=y-o),u+=(r.g=F=l[q+1])*N,v+=(r.b=G=l[q+2])*N,w+=(r.a=s=l[q+3])*N,A+=E,B+=F,C+=G,D+=s,r=r.next;o=S;r=V;for(H=0;H<e;H++)l[p+3]=s=w*P>>Q,0!=s?(s=255/s,l[p]=(t*P>>Q)*s,l[p+1]=(u*P>>Q)*s,l[p+2]=(v*P>>Q)*s):l[p]=l[p+1]=l[p+2]=0,t-=J,u-=K,v-=L,w-=M,J-=o.r,K-=o.g,L-=o.b,M-=o.a,q=x+((q=H+n+1)<T?q:T)<<2,A+=o.r=l[q],B+=o.g=l[q+1],C+=o.b=l[q+2],D+=o.a=l[q+3],t+=A,u+=B,v+=C,w+=D,o=o.next,J+=E=r.r,K+=F=r.g,L+=G=r.b,M+=s=r.a,A-=E,B-=F,C-=G,D-=s,r=
r.next,p+=4;x+=e}for(H=0;H<e;H++){B=C=D=A=u=v=w=t=0;p=H<<2;J=y*(E=l[p]);K=y*(F=l[p+1]);L=y*(G=l[p+2]);M=y*(s=l[p+3]);t+=O*E;u+=O*F;v+=O*G;w+=O*s;r=S;for(o=0;o<y;o++)r.r=E,r.g=F,r.b=G,r.a=s,r=r.next;q=e;for(o=1;o<=n;o++)p=q+H<<2,t+=(r.r=E=l[p])*(N=y-o),u+=(r.g=F=l[p+1])*N,v+=(r.b=G=l[p+2])*N,w+=(r.a=s=l[p+3])*N,A+=E,B+=F,C+=G,D+=s,r=r.next,o<U&&(q+=e);p=H;o=S;r=V;for(z=0;z<c;z++)q=p<<2,l[q+3]=s=w*P>>Q,0<s?(s=255/s,l[q]=(t*P>>Q)*s,l[q+1]=(u*P>>Q)*s,l[q+2]=(v*P>>Q)*s):l[q]=l[q+1]=l[q+2]=0,t-=J,u-=K,
v-=L,w-=M,J-=o.r,K-=o.g,L-=o.b,M-=o.a,q=H+((q=z+y)<U?q:U)*e<<2,t+=A+=o.r=l[q],u+=B+=o.g=l[q+1],v+=C+=o.b=l[q+2],w+=D+=o.a=l[q+3],o=o.next,J+=E=r.r,K+=F=r.g,L+=G=r.b,M+=s=r.a,A-=E,B-=F,C-=G,D-=s,r=r.next,p+=e}h.putImageData(m,a,b)}}function d(){this.a=this.b=this.g=this.r=0;this.next=null}var f=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,
374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,
262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],g=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,
21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,
24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];(function(){function d(){var a={FRAMERATE:30,MAX_VIRTUAL_PIXELS:3E4,init:function(b){var e=0;a.UniqueId=function(){e++;return"canvg"+e};a.Definitions={};a.Styles={};a.Animations=[];a.Images=[];a.ctx=b;a.ViewPort=new function(){this.viewPorts=[];this.Clear=function(){this.viewPorts=[]};this.SetCurrent=function(a,e){this.viewPorts.push({width:a,height:e})};this.RemoveCurrent=function(){this.viewPorts.pop()};this.Current=function(){return this.viewPorts[this.viewPorts.length-
1]};this.width=function(){return this.Current().width};this.height=function(){return this.Current().height};this.ComputeSize=function(a){return null!=a&&"number"==typeof a?a:"x"==a?this.width():"y"==a?this.height():Math.sqrt(Math.pow(this.width(),2)+Math.pow(this.height(),2))/Math.sqrt(2)}}}};a.init();a.ImagesLoaded=function(){for(var b=0;b<a.Images.length;b++)if(!a.Images[b].loaded)return!1;return!0};a.trim=function(a){return a.replace(/^\s+|\s+$/g,"")};a.compressSpaces=function(a){return a.replace(/[\s\r\t\n]+/gm,
" ")};a.ajax=function(a){var e;return(e=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"))?(e.open("GET",a,!1),e.send(null),e.responseText):null};a.parseXml=function(a){if(window.DOMParser)return(new DOMParser).parseFromString(a,"text/xml");var a=a.replace(/<!DOCTYPE svg[^>]*>/,""),e=new ActiveXObject("Microsoft.XMLDOM");e.async="false";e.loadXML(a);return e};a.Property=function(a,e){this.name=a;this.value=e};a.Property.prototype.getValue=function(){return this.value};
a.Property.prototype.hasValue=function(){return null!=this.value&&""!==this.value};a.Property.prototype.numValue=function(){if(!this.hasValue())return 0;var a=parseFloat(this.value);(this.value+"").match(/%$/)&&(a/=100);return a};a.Property.prototype.valueOrDefault=function(a){return this.hasValue()?this.value:a};a.Property.prototype.numValueOrDefault=function(a){return this.hasValue()?this.numValue():a};a.Property.prototype.addOpacity=function(b){var e=this.value;if(null!=b&&""!=b&&"string"==typeof this.value){var c=
new k(this.value);c.ok&&(e="rgba("+c.r+", "+c.g+", "+c.b+", "+b+")")}return new a.Property(this.name,e)};a.Property.prototype.getDefinition=function(){var b=this.value.match(/#([^\)'"]+)/);b&&(b=b[1]);b||(b=this.value);return a.Definitions[b]};a.Property.prototype.isUrlDefinition=function(){return 0==this.value.indexOf("url(")};a.Property.prototype.getFillStyleDefinition=function(b,e){var c=this.getDefinition();if(null!=c&&c.createGradient)return c.createGradient(a.ctx,b,e);if(null!=c&&c.createPattern){if(c.getHrefAttribute().hasValue()){var n=
c.attribute("patternTransform"),c=c.getHrefAttribute().getDefinition();n.hasValue()&&(c.attribute("patternTransform",!0).value=n.value)}return c.createPattern(a.ctx,b)}return null};a.Property.prototype.getDPI=function(){return 96};a.Property.prototype.getEM=function(b){var e=12,c=new a.Property("fontSize",a.Font.Parse(a.ctx.font).fontSize);c.hasValue()&&(e=c.toPixels(b));return e};a.Property.prototype.getUnits=function(){return(this.value+"").replace(/[0-9\.\-]/g,"")};a.Property.prototype.toPixels=
function(b,e){if(!this.hasValue())return 0;var c=this.value+"";if(c.match(/em$/))return this.numValue()*this.getEM(b);if(c.match(/ex$/))return this.numValue()*this.getEM(b)/2;if(c.match(/px$/))return this.numValue();if(c.match(/pt$/))return this.numValue()*this.getDPI(b)*(1/72);if(c.match(/pc$/))return 15*this.numValue();if(c.match(/cm$/))return this.numValue()*this.getDPI(b)/2.54;if(c.match(/mm$/))return this.numValue()*this.getDPI(b)/25.4;if(c.match(/in$/))return this.numValue()*this.getDPI(b);
if(c.match(/%$/))return this.numValue()*a.ViewPort.ComputeSize(b);c=this.numValue();return e&&1>c?c*a.ViewPort.ComputeSize(b):c};a.Property.prototype.toMilliseconds=function(){if(!this.hasValue())return 0;var a=this.value+"";if(a.match(/s$/))return 1E3*this.numValue();a.match(/ms$/);return this.numValue()};a.Property.prototype.toRadians=function(){if(!this.hasValue())return 0;var a=this.value+"";return a.match(/deg$/)?this.numValue()*(Math.PI/180):a.match(/grad$/)?this.numValue()*(Math.PI/200):a.match(/rad$/)?
this.numValue():this.numValue()*(Math.PI/180)};a.Font=new function(){this.Styles="normal|italic|oblique|inherit";this.Variants="normal|small-caps|inherit";this.Weights="normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900|inherit";this.CreateFont=function(e,c,b,m,d,f){f=null!=f?this.Parse(f):this.CreateFont("","","","","",a.ctx.font);return{fontFamily:d||f.fontFamily,fontSize:m||f.fontSize,fontStyle:e||f.fontStyle,fontWeight:b||f.fontWeight,fontVariant:c||f.fontVariant,toString:function(){return[this.fontStyle,
this.fontVariant,this.fontWeight,this.fontSize,this.fontFamily].join(" ")}}};var b=this;this.Parse=function(e){for(var c={},e=a.trim(a.compressSpaces(e||"")).split(" "),n=!1,m=!1,d=!1,f=!1,g="",h=0;h<e.length;h++)!m&&-1!=b.Styles.indexOf(e[h])?("inherit"!=e[h]&&(c.fontStyle=e[h]),m=!0):!f&&-1!=b.Variants.indexOf(e[h])?("inherit"!=e[h]&&(c.fontVariant=e[h]),m=f=!0):!d&&-1!=b.Weights.indexOf(e[h])?("inherit"!=e[h]&&(c.fontWeight=e[h]),m=f=d=!0):n?"inherit"!=e[h]&&(g+=e[h]):("inherit"!=e[h]&&(c.fontSize=
e[h].split("/")[0]),m=f=d=n=!0);""!=g&&(c.fontFamily=g);return c}};a.ToNumberArray=function(b){for(var b=a.trim(a.compressSpaces((b||"").replace(/,/g," "))).split(" "),e=0;e<b.length;e++)b[e]=parseFloat(b[e]);return b};a.Point=function(a,e){this.x=a;this.y=e};a.Point.prototype.angleTo=function(a){return Math.atan2(a.y-this.y,a.x-this.x)};a.Point.prototype.applyTransform=function(a){var e=this.x*a[1]+this.y*a[3]+a[5];this.x=this.x*a[0]+this.y*a[2]+a[4];this.y=e};a.CreatePoint=function(b){b=a.ToNumberArray(b);
return new a.Point(b[0],b[1])};a.CreatePath=function(b){for(var b=a.ToNumberArray(b),e=[],c=0;c<b.length;c+=2)e.push(new a.Point(b[c],b[c+1]));return e};a.BoundingBox=function(a,e,c,n){this.y2=this.x2=this.y1=this.x1=Number.NaN;this.x=function(){return this.x1};this.y=function(){return this.y1};this.width=function(){return this.x2-this.x1};this.height=function(){return this.y2-this.y1};this.addPoint=function(a,c){if(null!=a){if(isNaN(this.x1)||isNaN(this.x2))this.x2=this.x1=a;a<this.x1&&(this.x1=
a);a>this.x2&&(this.x2=a)}if(null!=c){if(isNaN(this.y1)||isNaN(this.y2))this.y2=this.y1=c;c<this.y1&&(this.y1=c);c>this.y2&&(this.y2=c)}};this.addX=function(a){this.addPoint(a,null)};this.addY=function(a){this.addPoint(null,a)};this.addBoundingBox=function(a){this.addPoint(a.x1,a.y1);this.addPoint(a.x2,a.y2)};this.addQuadraticCurve=function(a,c,e,b,n,d){e=a+2/3*(e-a);b=c+2/3*(b-c);this.addBezierCurve(a,c,e,e+1/3*(n-a),b,b+1/3*(d-c),n,d)};this.addBezierCurve=function(a,c,e,b,n,d,f,g){var h=[a,c],k=
[e,b],j=[n,d],l=[f,g];this.addPoint(h[0],h[1]);this.addPoint(l[0],l[1]);for(i=0;1>=i;i++)if(a=function(a){return Math.pow(1-a,3)*h[i]+3*Math.pow(1-a,2)*a*k[i]+3*(1-a)*Math.pow(a,2)*j[i]+Math.pow(a,3)*l[i]},c=6*h[i]-12*k[i]+6*j[i],e=-3*h[i]+9*k[i]-9*j[i]+3*l[i],b=3*k[i]-3*h[i],0==e)0!=c&&(c=-b/c,0<c&&1>c&&(0==i&&this.addX(a(c)),1==i&&this.addY(a(c))));else if(b=Math.pow(c,2)-4*b*e,!(0>b)&&(n=(-c+Math.sqrt(b))/(2*e),0<n&&1>n&&(0==i&&this.addX(a(n)),1==i&&this.addY(a(n))),c=(-c-Math.sqrt(b))/(2*e),0<
c&&1>c))0==i&&this.addX(a(c)),1==i&&this.addY(a(c))};this.isPointInBox=function(a,c){return this.x1<=a&&a<=this.x2&&this.y1<=c&&c<=this.y2};this.addPoint(a,e);this.addPoint(c,n)};a.Transform=function(b){var e=this;this.Type={};this.Type.translate=function(c){this.p=a.CreatePoint(c);this.apply=function(a){a.translate(this.p.x||0,this.p.y||0)};this.unapply=function(a){a.translate(-1*this.p.x||0,-1*this.p.y||0)};this.applyToPoint=function(a){a.applyTransform([1,0,0,1,this.p.x||0,this.p.y||0])}};this.Type.rotate=
function(c){c=a.ToNumberArray(c);this.angle=new a.Property("angle",c[0]);this.cx=c[1]||0;this.cy=c[2]||0;this.apply=function(a){a.translate(this.cx,this.cy);a.rotate(this.angle.toRadians());a.translate(-this.cx,-this.cy)};this.unapply=function(a){a.translate(this.cx,this.cy);a.rotate(-1*this.angle.toRadians());a.translate(-this.cx,-this.cy)};this.applyToPoint=function(a){var c=this.angle.toRadians();a.applyTransform([1,0,0,1,this.p.x||0,this.p.y||0]);a.applyTransform([Math.cos(c),Math.sin(c),-Math.sin(c),
Math.cos(c),0,0]);a.applyTransform([1,0,0,1,-this.p.x||0,-this.p.y||0])}};this.Type.scale=function(c){this.p=a.CreatePoint(c);this.apply=function(a){a.scale(this.p.x||1,this.p.y||this.p.x||1)};this.unapply=function(a){a.scale(1/this.p.x||1,1/this.p.y||this.p.x||1)};this.applyToPoint=function(a){a.applyTransform([this.p.x||0,0,0,this.p.y||0,0,0])}};this.Type.matrix=function(c){this.m=a.ToNumberArray(c);this.apply=function(a){a.transform(this.m[0],this.m[1],this.m[2],this.m[3],this.m[4],this.m[5])};
this.applyToPoint=function(a){a.applyTransform(this.m)}};this.Type.SkewBase=function(c){this.base=e.Type.matrix;this.base(c);this.angle=new a.Property("angle",c)};this.Type.SkewBase.prototype=new this.Type.matrix;this.Type.skewX=function(a){this.base=e.Type.SkewBase;this.base(a);this.m=[1,0,Math.tan(this.angle.toRadians()),1,0,0]};this.Type.skewX.prototype=new this.Type.SkewBase;this.Type.skewY=function(a){this.base=e.Type.SkewBase;this.base(a);this.m=[1,Math.tan(this.angle.toRadians()),0,1,0,0]};
this.Type.skewY.prototype=new this.Type.SkewBase;this.transforms=[];this.apply=function(a){for(var c=0;c<this.transforms.length;c++)this.transforms[c].apply(a)};this.unapply=function(a){for(var c=this.transforms.length-1;0<=c;c--)this.transforms[c].unapply(a)};this.applyToPoint=function(a){for(var c=0;c<this.transforms.length;c++)this.transforms[c].applyToPoint(a)};for(var b=a.trim(a.compressSpaces(b)).replace(/\)(\s?,\s?)/g,") ").split(/\s(?=[a-z])/),c=0;c<b.length;c++){var n=a.trim(b[c].split("(")[0]),
m=b[c].split("(")[1].replace(")",""),m=new this.Type[n](m);m.type=n;this.transforms.push(m)}};a.AspectRatio=function(b,e,c,n,m,d,f,g,h,k){var e=a.compressSpaces(e),e=e.replace(/^defer\s/,""),j=e.split(" ")[0]||"xMidYMid",e=e.split(" ")[1]||"meet",l=c/n,q=m/d,p=Math.min(l,q),x=Math.max(l,q);"meet"==e&&(n*=p,d*=p);"slice"==e&&(n*=x,d*=x);h=new a.Property("refX",h);k=new a.Property("refY",k);h.hasValue()&&k.hasValue()?b.translate(-p*h.toPixels("x"),-p*k.toPixels("y")):(j.match(/^xMid/)&&("meet"==e&&
p==q||"slice"==e&&x==q)&&b.translate(c/2-n/2,0),j.match(/YMid$/)&&("meet"==e&&p==l||"slice"==e&&x==l)&&b.translate(0,m/2-d/2),j.match(/^xMax/)&&("meet"==e&&p==q||"slice"==e&&x==q)&&b.translate(c-n,0),j.match(/YMax$/)&&("meet"==e&&p==l||"slice"==e&&x==l)&&b.translate(0,m-d));"none"==j?b.scale(l,q):"meet"==e?b.scale(p,p):"slice"==e&&b.scale(x,x);b.translate(null==f?0:-f,null==g?0:-g)};a.Element={};a.EmptyProperty=new a.Property("EMPTY","");a.Element.ElementBase=function(b){this.attributes={};this.styles=
{};this.children=[];this.attribute=function(c,e){var b=this.attributes[c];if(null!=b)return b;!0==e&&(b=new a.Property(c,""),this.attributes[c]=b);return b||a.EmptyProperty};this.getHrefAttribute=function(){for(var c in this.attributes)if(c.match(/:href$/))return this.attributes[c];return a.EmptyProperty};this.style=function(c,e){var b=this.styles[c];if(null!=b)return b;var n=this.attribute(c);if(null!=n&&n.hasValue())return this.styles[c]=n;n=this.parent;if(null!=n&&(n=n.style(c),null!=n&&n.hasValue()))return n;
!0==e&&(b=new a.Property(c,""),this.styles[c]=b);return b||a.EmptyProperty};this.render=function(a){if("none"!=this.style("display").value&&"hidden"!=this.attribute("visibility").value){a.save();if(this.attribute("mask").hasValue()){var c=this.attribute("mask").getDefinition();null!=c&&c.apply(a,this)}else this.style("filter").hasValue()?(c=this.style("filter").getDefinition(),null!=c&&c.apply(a,this)):(this.setContext(a),this.renderChildren(a),this.clearContext(a));a.restore()}};this.setContext=
function(){};this.clearContext=function(){};this.renderChildren=function(a){for(var c=0;c<this.children.length;c++)this.children[c].render(a)};this.addChild=function(c,e){var b=c;e&&(b=a.CreateElement(c));b.parent=this;this.children.push(b)};if(null!=b&&1==b.nodeType){for(var e=0;e<b.childNodes.length;e++){var c=b.childNodes[e];1==c.nodeType&&this.addChild(c,!0);this.captureTextNodes&&3==c.nodeType&&""!=a.trim(a.compressSpaces(c.nodeValue||c.text||""))&&this.addChild(new a.Element.tspan(c),!1)}for(e=
0;e<b.attributes.length;e++)c=b.attributes[e],this.attributes[c.nodeName]=new a.Property(c.nodeName,c.nodeValue);c=a.Styles[b.nodeName];if(null!=c)for(var n in c)this.styles[n]=c[n];if(this.attribute("class").hasValue())for(var e=a.compressSpaces(this.attribute("class").value).split(" "),m=0;m<e.length;m++){c=a.Styles["."+e[m]];if(null!=c)for(n in c)this.styles[n]=c[n];c=a.Styles[b.nodeName+"."+e[m]];if(null!=c)for(n in c)this.styles[n]=c[n]}if(this.attribute("id").hasValue()&&(c=a.Styles["#"+this.attribute("id").value],
null!=c))for(n in c)this.styles[n]=c[n];if(this.attribute("style").hasValue()){c=this.attribute("style").value.split(";");for(e=0;e<c.length;e++)""!=a.trim(c[e])&&(b=c[e].split(":"),n=a.trim(b[0]),b=a.trim(b[1]),this.styles[n]=new a.Property(n,b))}this.attribute("id").hasValue()&&null==a.Definitions[this.attribute("id").value]&&(a.Definitions[this.attribute("id").value]=this)}};a.Element.RenderedElementBase=function(b){this.base=a.Element.ElementBase;this.base(b);this.setContext=function(e){if(this.style("fill").isUrlDefinition()){var c=
this.style("fill").getFillStyleDefinition(this,this.style("fill-opacity"));null!=c&&(e.fillStyle=c)}else this.style("fill").hasValue()&&(c=this.style("fill"),"currentColor"==c.value&&(c.value=this.style("color").value),e.fillStyle="none"==c.value?"rgba(0,0,0,0)":c.value);this.style("fill-opacity").hasValue()&&(c=new a.Property("fill",e.fillStyle),c=c.addOpacity(this.style("fill-opacity").value),e.fillStyle=c.value);this.style("stroke").isUrlDefinition()?(c=this.style("stroke").getFillStyleDefinition(this,
this.style("stroke-opacity")),null!=c&&(e.strokeStyle=c)):this.style("stroke").hasValue()&&(c=this.style("stroke"),"currentColor"==c.value&&(c.value=this.style("color").value),e.strokeStyle="none"==c.value?"rgba(0,0,0,0)":c.value);this.style("stroke-opacity").hasValue()&&(c=new a.Property("stroke",e.strokeStyle),c=c.addOpacity(this.style("stroke-opacity").value),e.strokeStyle=c.value);this.style("stroke-width").hasValue()&&(c=this.style("stroke-width").toPixels(),e.lineWidth=0==c?0.001:c);this.style("stroke-linecap").hasValue()&&
(e.lineCap=this.style("stroke-linecap").value);this.style("stroke-linejoin").hasValue()&&(e.lineJoin=this.style("stroke-linejoin").value);this.style("stroke-miterlimit").hasValue()&&(e.miterLimit=this.style("stroke-miterlimit").value);this.style("stroke-dasharray").hasValue()&&((c=a.ToNumberArray(this.style("stroke-dasharray").value),"undefined"!=typeof e.setLineDash?e.setLineDash(c):"undefined"!=typeof e.webkitLineDash?e.webkitLineDash=c:"undefined"!=typeof e.mozDash&&(e.mozDash=c),c=this.style("stroke-dashoffset").numValueOrDefault(1),
"undefined"!=typeof e.lineDashOffset)?e.lineDashOffset=c:"undefined"!=typeof e.webkitLineDashOffset?e.webkitLineDashOffset=c:"undefined"!=typeof e.mozDashOffset&&(e.mozDashOffset=c));"undefined"!=typeof e.font&&(e.font=a.Font.CreateFont(this.style("font-style").value,this.style("font-variant").value,this.style("font-weight").value,this.style("font-size").hasValue()?this.style("font-size").toPixels()+"px":"",this.style("font-family").value).toString());this.attribute("transform").hasValue()&&(new a.Transform(this.attribute("transform").value)).apply(e);
this.style("clip-path").hasValue()&&(c=this.style("clip-path").getDefinition(),null!=c&&c.apply(e));this.style("opacity").hasValue()&&(e.globalAlpha=this.style("opacity").numValue())}};a.Element.RenderedElementBase.prototype=new a.Element.ElementBase;a.Element.PathElementBase=function(b){this.base=a.Element.RenderedElementBase;this.base(b);this.path=function(e){null!=e&&e.beginPath();return new a.BoundingBox};this.renderChildren=function(e){this.path(e);a.Mouse.checkPath(this,e);""!=e.fillStyle&&
(this.attribute("fill-rule").hasValue()?e.fill(this.attribute("fill-rule").value):e.fill());""!=e.strokeStyle&&e.stroke();var c=this.getMarkers();if(null!=c){if(this.style("marker-start").isUrlDefinition()){var b=this.style("marker-start").getDefinition();b.render(e,c[0][0],c[0][1])}if(this.style("marker-mid").isUrlDefinition())for(var b=this.style("marker-mid").getDefinition(),m=1;m<c.length-1;m++)b.render(e,c[m][0],c[m][1]);this.style("marker-end").isUrlDefinition()&&(b=this.style("marker-end").getDefinition(),
b.render(e,c[c.length-1][0],c[c.length-1][1]))}};this.getBoundingBox=function(){return this.path()};this.getMarkers=function(){return null}};a.Element.PathElementBase.prototype=new a.Element.RenderedElementBase;a.Element.svg=function(b){this.base=a.Element.RenderedElementBase;this.base(b);this.baseClearContext=this.clearContext;this.clearContext=function(e){this.baseClearContext(e);a.ViewPort.RemoveCurrent()};this.baseSetContext=this.setContext;this.setContext=function(e){e.strokeStyle="rgba(0,0,0,0)";
e.lineCap="butt";e.lineJoin="miter";e.miterLimit=4;this.baseSetContext(e);this.attribute("x").hasValue()||(this.attribute("x",!0).value=0);this.attribute("y").hasValue()||(this.attribute("y",!0).value=0);e.translate(this.attribute("x").toPixels("x"),this.attribute("y").toPixels("y"));var c=a.ViewPort.width(),b=a.ViewPort.height();this.attribute("width").hasValue()||(this.attribute("width",!0).value="100%");this.attribute("height").hasValue()||(this.attribute("height",!0).value="100%");if("undefined"==
typeof this.root){var c=this.attribute("width").toPixels("x"),b=this.attribute("height").toPixels("y"),m=0,d=0;this.attribute("refX").hasValue()&&this.attribute("refY").hasValue()&&(m=-this.attribute("refX").toPixels("x"),d=-this.attribute("refY").toPixels("y"));e.beginPath();e.moveTo(m,d);e.lineTo(c,d);e.lineTo(c,b);e.lineTo(m,b);e.closePath();e.clip()}a.ViewPort.SetCurrent(c,b);if(this.attribute("viewBox").hasValue()){var m=a.ToNumberArray(this.attribute("viewBox").value),d=m[0],f=m[1],c=m[2],b=
m[3];a.AspectRatio(e,this.attribute("preserveAspectRatio").value,a.ViewPort.width(),c,a.ViewPort.height(),b,d,f,this.attribute("refX").value,this.attribute("refY").value);a.ViewPort.RemoveCurrent();a.ViewPort.SetCurrent(m[2],m[3])}}};a.Element.svg.prototype=new a.Element.RenderedElementBase;a.Element.rect=function(b){this.base=a.Element.PathElementBase;this.base(b);this.path=function(e){var c=this.attribute("x").toPixels("x"),b=this.attribute("y").toPixels("y"),m=this.attribute("width").toPixels("x"),
d=this.attribute("height").toPixels("y"),f=this.attribute("rx").toPixels("x"),g=this.attribute("ry").toPixels("y");this.attribute("rx").hasValue()&&!this.attribute("ry").hasValue()&&(g=f);this.attribute("ry").hasValue()&&!this.attribute("rx").hasValue()&&(f=g);f=Math.min(f,m/2);g=Math.min(g,d/2);null!=e&&(e.beginPath(),e.moveTo(c+f,b),e.lineTo(c+m-f,b),e.quadraticCurveTo(c+m,b,c+m,b+g),e.lineTo(c+m,b+d-g),e.quadraticCurveTo(c+m,b+d,c+m-f,b+d),e.lineTo(c+f,b+d),e.quadraticCurveTo(c,b+d,c,b+d-g),e.lineTo(c,
b+g),e.quadraticCurveTo(c,b,c+f,b),e.closePath());return new a.BoundingBox(c,b,c+m,b+d)}};a.Element.rect.prototype=new a.Element.PathElementBase;a.Element.circle=function(b){this.base=a.Element.PathElementBase;this.base(b);this.path=function(e){var c=this.attribute("cx").toPixels("x"),b=this.attribute("cy").toPixels("y"),m=this.attribute("r").toPixels();null!=e&&(e.beginPath(),e.arc(c,b,m,0,2*Math.PI,!0),e.closePath());return new a.BoundingBox(c-m,b-m,c+m,b+m)}};a.Element.circle.prototype=new a.Element.PathElementBase;
a.Element.ellipse=function(b){this.base=a.Element.PathElementBase;this.base(b);this.path=function(e){var c=4*((Math.sqrt(2)-1)/3),b=this.attribute("rx").toPixels("x"),m=this.attribute("ry").toPixels("y"),d=this.attribute("cx").toPixels("x"),f=this.attribute("cy").toPixels("y");null!=e&&(e.beginPath(),e.moveTo(d,f-m),e.bezierCurveTo(d+c*b,f-m,d+b,f-c*m,d+b,f),e.bezierCurveTo(d+b,f+c*m,d+c*b,f+m,d,f+m),e.bezierCurveTo(d-c*b,f+m,d-b,f+c*m,d-b,f),e.bezierCurveTo(d-b,f-c*m,d-c*b,f-m,d,f-m),e.closePath());
return new a.BoundingBox(d-b,f-m,d+b,f+m)}};a.Element.ellipse.prototype=new a.Element.PathElementBase;a.Element.line=function(b){this.base=a.Element.PathElementBase;this.base(b);this.getPoints=function(){return[new a.Point(this.attribute("x1").toPixels("x"),this.attribute("y1").toPixels("y")),new a.Point(this.attribute("x2").toPixels("x"),this.attribute("y2").toPixels("y"))]};this.path=function(e){var c=this.getPoints();null!=e&&(e.beginPath(),e.moveTo(c[0].x,c[0].y),e.lineTo(c[1].x,c[1].y));return new a.BoundingBox(c[0].x,
c[0].y,c[1].x,c[1].y)};this.getMarkers=function(){var a=this.getPoints(),c=a[0].angleTo(a[1]);return[[a[0],c],[a[1],c]]}};a.Element.line.prototype=new a.Element.PathElementBase;a.Element.polyline=function(b){this.base=a.Element.PathElementBase;this.base(b);this.points=a.CreatePath(this.attribute("points").value);this.path=function(e){var c=new a.BoundingBox(this.points[0].x,this.points[0].y);null!=e&&(e.beginPath(),e.moveTo(this.points[0].x,this.points[0].y));for(var b=1;b<this.points.length;b++)c.addPoint(this.points[b].x,
this.points[b].y),null!=e&&e.lineTo(this.points[b].x,this.points[b].y);return c};this.getMarkers=function(){for(var a=[],c=0;c<this.points.length-1;c++)a.push([this.points[c],this.points[c].angleTo(this.points[c+1])]);a.push([this.points[this.points.length-1],a[a.length-1][1]]);return a}};a.Element.polyline.prototype=new a.Element.PathElementBase;a.Element.polygon=function(b){this.base=a.Element.polyline;this.base(b);this.basePath=this.path;this.path=function(a){var c=this.basePath(a);null!=a&&(a.lineTo(this.points[0].x,
this.points[0].y),a.closePath());return c}};a.Element.polygon.prototype=new a.Element.polyline;a.Element.path=function(b){this.base=a.Element.PathElementBase;this.base(b);b=this.attribute("d").value;b=b.replace(/,/gm," ");b=b.replace(/([MmZzLlHhVvCcSsQqTtAa])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2");b=b.replace(/([MmZzLlHhVvCcSsQqTtAa])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2");b=b.replace(/([MmZzLlHhVvCcSsQqTtAa])([^\s])/gm,"$1 $2");b=b.replace(/([^\s])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2");b=b.replace(/([0-9])([+\-])/gm,
"$1 $2");b=b.replace(/(\.[0-9]*)(\.)/gm,"$1 $2");b=b.replace(/([Aa](\s+[0-9]+){3})\s+([01])\s*([01])/gm,"$1 $3 $4 ");b=a.compressSpaces(b);b=a.trim(b);this.PathParser=new function(e){this.tokens=e.split(" ");this.reset=function(){this.i=-1;this.previousCommand=this.command="";this.start=new a.Point(0,0);this.control=new a.Point(0,0);this.current=new a.Point(0,0);this.points=[];this.angles=[]};this.isEnd=function(){return this.i>=this.tokens.length-1};this.isCommandOrEnd=function(){return this.isEnd()?
!0:null!=this.tokens[this.i+1].match(/^[A-Za-z]$/)};this.isRelativeCommand=function(){switch(this.command){case "m":case "l":case "h":case "v":case "c":case "s":case "q":case "t":case "a":case "z":return!0}return!1};this.getToken=function(){this.i++;return this.tokens[this.i]};this.getScalar=function(){return parseFloat(this.getToken())};this.nextCommand=function(){this.previousCommand=this.command;this.command=this.getToken()};this.getPoint=function(){return this.makeAbsolute(new a.Point(this.getScalar(),
this.getScalar()))};this.getAsControlPoint=function(){var a=this.getPoint();return this.control=a};this.getAsCurrentPoint=function(){var a=this.getPoint();return this.current=a};this.getReflectedControlPoint=function(){return"c"!=this.previousCommand.toLowerCase()&&"s"!=this.previousCommand.toLowerCase()&&"q"!=this.previousCommand.toLowerCase()&&"t"!=this.previousCommand.toLowerCase()?this.current:new a.Point(2*this.current.x-this.control.x,2*this.current.y-this.control.y)};this.makeAbsolute=function(a){this.isRelativeCommand()&&
(a.x+=this.current.x,a.y+=this.current.y);return a};this.addMarker=function(a,e,b){null!=b&&(0<this.angles.length&&null==this.angles[this.angles.length-1])&&(this.angles[this.angles.length-1]=this.points[this.points.length-1].angleTo(b));this.addMarkerAngle(a,null==e?null:e.angleTo(a))};this.addMarkerAngle=function(a,e){this.points.push(a);this.angles.push(e)};this.getMarkerPoints=function(){return this.points};this.getMarkerAngles=function(){for(var a=0;a<this.angles.length;a++)if(null==this.angles[a])for(var e=
a+1;e<this.angles.length;e++)if(null!=this.angles[e]){this.angles[a]=this.angles[e];break}return this.angles}}(b);this.path=function(e){var c=this.PathParser;c.reset();var b=new a.BoundingBox;for(null!=e&&e.beginPath();!c.isEnd();)switch(c.nextCommand(),c.command){case "M":case "m":var d=c.getAsCurrentPoint();c.addMarker(d);b.addPoint(d.x,d.y);null!=e&&e.moveTo(d.x,d.y);for(c.start=c.current;!c.isCommandOrEnd();)d=c.getAsCurrentPoint(),c.addMarker(d,c.start),b.addPoint(d.x,d.y),null!=e&&e.lineTo(d.x,
d.y);break;case "L":case "l":for(;!c.isCommandOrEnd();){var f=c.current,d=c.getAsCurrentPoint();c.addMarker(d,f);b.addPoint(d.x,d.y);null!=e&&e.lineTo(d.x,d.y)}break;case "H":case "h":for(;!c.isCommandOrEnd();)d=new a.Point((c.isRelativeCommand()?c.current.x:0)+c.getScalar(),c.current.y),c.addMarker(d,c.current),c.current=d,b.addPoint(c.current.x,c.current.y),null!=e&&e.lineTo(c.current.x,c.current.y);break;case "V":case "v":for(;!c.isCommandOrEnd();)d=new a.Point(c.current.x,(c.isRelativeCommand()?
c.current.y:0)+c.getScalar()),c.addMarker(d,c.current),c.current=d,b.addPoint(c.current.x,c.current.y),null!=e&&e.lineTo(c.current.x,c.current.y);break;case "C":case "c":for(;!c.isCommandOrEnd();){var g=c.current,f=c.getPoint(),h=c.getAsControlPoint(),d=c.getAsCurrentPoint();c.addMarker(d,h,f);b.addBezierCurve(g.x,g.y,f.x,f.y,h.x,h.y,d.x,d.y);null!=e&&e.bezierCurveTo(f.x,f.y,h.x,h.y,d.x,d.y)}break;case "S":case "s":for(;!c.isCommandOrEnd();)g=c.current,f=c.getReflectedControlPoint(),h=c.getAsControlPoint(),
d=c.getAsCurrentPoint(),c.addMarker(d,h,f),b.addBezierCurve(g.x,g.y,f.x,f.y,h.x,h.y,d.x,d.y),null!=e&&e.bezierCurveTo(f.x,f.y,h.x,h.y,d.x,d.y);break;case "Q":case "q":for(;!c.isCommandOrEnd();)g=c.current,h=c.getAsControlPoint(),d=c.getAsCurrentPoint(),c.addMarker(d,h,h),b.addQuadraticCurve(g.x,g.y,h.x,h.y,d.x,d.y),null!=e&&e.quadraticCurveTo(h.x,h.y,d.x,d.y);break;case "T":case "t":for(;!c.isCommandOrEnd();)g=c.current,h=c.getReflectedControlPoint(),c.control=h,d=c.getAsCurrentPoint(),c.addMarker(d,
h,h),b.addQuadraticCurve(g.x,g.y,h.x,h.y,d.x,d.y),null!=e&&e.quadraticCurveTo(h.x,h.y,d.x,d.y);break;case "A":case "a":for(;!c.isCommandOrEnd();){var g=c.current,k=c.getScalar(),l=c.getScalar(),f=c.getScalar()*(Math.PI/180),j=c.getScalar(),h=c.getScalar(),d=c.getAsCurrentPoint(),o=new a.Point(Math.cos(f)*(g.x-d.x)/2+Math.sin(f)*(g.y-d.y)/2,-Math.sin(f)*(g.x-d.x)/2+Math.cos(f)*(g.y-d.y)/2),q=Math.pow(o.x,2)/Math.pow(k,2)+Math.pow(o.y,2)/Math.pow(l,2);1<q&&(k*=Math.sqrt(q),l*=Math.sqrt(q));j=(j==h?
-1:1)*Math.sqrt((Math.pow(k,2)*Math.pow(l,2)-Math.pow(k,2)*Math.pow(o.y,2)-Math.pow(l,2)*Math.pow(o.x,2))/(Math.pow(k,2)*Math.pow(o.y,2)+Math.pow(l,2)*Math.pow(o.x,2)));isNaN(j)&&(j=0);var p=new a.Point(j*k*o.y/l,j*-l*o.x/k),g=new a.Point((g.x+d.x)/2+Math.cos(f)*p.x-Math.sin(f)*p.y,(g.y+d.y)/2+Math.sin(f)*p.x+Math.cos(f)*p.y),x=function(a,c){return(a[0]*c[0]+a[1]*c[1])/(Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2))*Math.sqrt(Math.pow(c[0],2)+Math.pow(c[1],2)))},t=function(a,c){return(a[0]*c[1]<a[1]*
c[0]?-1:1)*Math.acos(x(a,c))},j=t([1,0],[(o.x-p.x)/k,(o.y-p.y)/l]),q=[(o.x-p.x)/k,(o.y-p.y)/l],p=[(-o.x-p.x)/k,(-o.y-p.y)/l],o=t(q,p);-1>=x(q,p)&&(o=Math.PI);1<=x(q,p)&&(o=0);q=1-h?1:-1;p=j+q*(o/2);t=new a.Point(g.x+k*Math.cos(p),g.y+l*Math.sin(p));c.addMarkerAngle(t,p-q*Math.PI/2);c.addMarkerAngle(d,p-q*Math.PI);b.addPoint(d.x,d.y);null!=e&&(x=k>l?k:l,d=k>l?1:k/l,k=k>l?l/k:1,e.translate(g.x,g.y),e.rotate(f),e.scale(d,k),e.arc(0,0,x,j,j+o,1-h),e.scale(1/d,1/k),e.rotate(-f),e.translate(-g.x,-g.y))}break;
case "Z":case "z":null!=e&&e.closePath(),c.current=c.start}return b};this.getMarkers=function(){for(var a=this.PathParser.getMarkerPoints(),c=this.PathParser.getMarkerAngles(),b=[],d=0;d<a.length;d++)b.push([a[d],c[d]]);return b}};a.Element.path.prototype=new a.Element.PathElementBase;a.Element.pattern=function(b){this.base=a.Element.ElementBase;this.base(b);this.createPattern=function(e){var c=this.attribute("width").toPixels("x",!0),b=this.attribute("height").toPixels("y",!0),d=new a.Element.svg;
d.attributes.viewBox=new a.Property("viewBox",this.attribute("viewBox").value);d.attributes.width=new a.Property("width",c+"px");d.attributes.height=new a.Property("height",b+"px");d.attributes.transform=new a.Property("transform",this.attribute("patternTransform").value);d.children=this.children;var f=document.createElement("canvas");f.width=c;f.height=b;c=f.getContext("2d");this.attribute("x").hasValue()&&this.attribute("y").hasValue()&&c.translate(this.attribute("x").toPixels("x",!0),this.attribute("y").toPixels("y",
!0));for(b=-1;1>=b;b++)for(var g=-1;1>=g;g++)c.save(),c.translate(b*f.width,g*f.height),d.render(c),c.restore();return e.createPattern(f,"repeat")}};a.Element.pattern.prototype=new a.Element.ElementBase;a.Element.marker=function(b){this.base=a.Element.ElementBase;this.base(b);this.baseRender=this.render;this.render=function(e,c,b){e.translate(c.x,c.y);"auto"==this.attribute("orient").valueOrDefault("auto")&&e.rotate(b);"strokeWidth"==this.attribute("markerUnits").valueOrDefault("strokeWidth")&&e.scale(e.lineWidth,
e.lineWidth);e.save();var d=new a.Element.svg;d.attributes.viewBox=new a.Property("viewBox",this.attribute("viewBox").value);d.attributes.refX=new a.Property("refX",this.attribute("refX").value);d.attributes.refY=new a.Property("refY",this.attribute("refY").value);d.attributes.width=new a.Property("width",this.attribute("markerWidth").value);d.attributes.height=new a.Property("height",this.attribute("markerHeight").value);d.attributes.fill=new a.Property("fill",this.attribute("fill").valueOrDefault("black"));
d.attributes.stroke=new a.Property("stroke",this.attribute("stroke").valueOrDefault("none"));d.children=this.children;d.render(e);e.restore();"strokeWidth"==this.attribute("markerUnits").valueOrDefault("strokeWidth")&&e.scale(1/e.lineWidth,1/e.lineWidth);"auto"==this.attribute("orient").valueOrDefault("auto")&&e.rotate(-b);e.translate(-c.x,-c.y)}};a.Element.marker.prototype=new a.Element.ElementBase;a.Element.defs=function(b){this.base=a.Element.ElementBase;this.base(b);this.render=function(){}};
a.Element.defs.prototype=new a.Element.ElementBase;a.Element.GradientBase=function(b){this.base=a.Element.ElementBase;this.base(b);this.gradientUnits=this.attribute("gradientUnits").valueOrDefault("objectBoundingBox");this.stops=[];for(b=0;b<this.children.length;b++){var e=this.children[b];"stop"==e.type&&this.stops.push(e)}this.getGradient=function(){};this.createGradient=function(c,e,b){var d=this;this.getHrefAttribute().hasValue()&&(d=this.getHrefAttribute().getDefinition());var f=function(c){return b.hasValue()?
(new a.Property("color",c)).addOpacity(b.value).value:c},c=this.getGradient(c,e);if(null==c)return f(d.stops[d.stops.length-1].color);for(e=0;e<d.stops.length;e++)c.addColorStop(d.stops[e].offset,f(d.stops[e].color));return this.attribute("gradientTransform").hasValue()?(d=a.ViewPort.viewPorts[0],f=new a.Element.rect,f.attributes.x=new a.Property("x",-a.MAX_VIRTUAL_PIXELS/3),f.attributes.y=new a.Property("y",-a.MAX_VIRTUAL_PIXELS/3),f.attributes.width=new a.Property("width",a.MAX_VIRTUAL_PIXELS),
f.attributes.height=new a.Property("height",a.MAX_VIRTUAL_PIXELS),e=new a.Element.g,e.attributes.transform=new a.Property("transform",this.attribute("gradientTransform").value),e.children=[f],f=new a.Element.svg,f.attributes.x=new a.Property("x",0),f.attributes.y=new a.Property("y",0),f.attributes.width=new a.Property("width",d.width),f.attributes.height=new a.Property("height",d.height),f.children=[e],e=document.createElement("canvas"),e.width=d.width,e.height=d.height,d=e.getContext("2d"),d.fillStyle=
c,f.render(d),d.createPattern(e,"no-repeat")):c}};a.Element.GradientBase.prototype=new a.Element.ElementBase;a.Element.linearGradient=function(b){this.base=a.Element.GradientBase;this.base(b);this.getGradient=function(a,c){var b=c.getBoundingBox();!this.attribute("x1").hasValue()&&(!this.attribute("y1").hasValue()&&!this.attribute("x2").hasValue()&&!this.attribute("y2").hasValue())&&(this.attribute("x1",!0).value=0,this.attribute("y1",!0).value=0,this.attribute("x2",!0).value=1,this.attribute("y2",
!0).value=0);var d="objectBoundingBox"==this.gradientUnits?b.x()+b.width()*this.attribute("x1").numValue():this.attribute("x1").toPixels("x"),f="objectBoundingBox"==this.gradientUnits?b.y()+b.height()*this.attribute("y1").numValue():this.attribute("y1").toPixels("y"),g="objectBoundingBox"==this.gradientUnits?b.x()+b.width()*this.attribute("x2").numValue():this.attribute("x2").toPixels("x"),b="objectBoundingBox"==this.gradientUnits?b.y()+b.height()*this.attribute("y2").numValue():this.attribute("y2").toPixels("y");
return d==g&&f==b?null:a.createLinearGradient(d,f,g,b)}};a.Element.linearGradient.prototype=new a.Element.GradientBase;a.Element.radialGradient=function(b){this.base=a.Element.GradientBase;this.base(b);this.getGradient=function(a,c){var b=c.getBoundingBox();this.attribute("cx").hasValue()||(this.attribute("cx",!0).value="50%");this.attribute("cy").hasValue()||(this.attribute("cy",!0).value="50%");this.attribute("r").hasValue()||(this.attribute("r",!0).value="50%");var d="objectBoundingBox"==this.gradientUnits?
b.x()+b.width()*this.attribute("cx").numValue():this.attribute("cx").toPixels("x"),f="objectBoundingBox"==this.gradientUnits?b.y()+b.height()*this.attribute("cy").numValue():this.attribute("cy").toPixels("y"),g=d,h=f;this.attribute("fx").hasValue()&&(g="objectBoundingBox"==this.gradientUnits?b.x()+b.width()*this.attribute("fx").numValue():this.attribute("fx").toPixels("x"));this.attribute("fy").hasValue()&&(h="objectBoundingBox"==this.gradientUnits?b.y()+b.height()*this.attribute("fy").numValue():
this.attribute("fy").toPixels("y"));b="objectBoundingBox"==this.gradientUnits?(b.width()+b.height())/2*this.attribute("r").numValue():this.attribute("r").toPixels();return a.createRadialGradient(g,h,0,d,f,b)}};a.Element.radialGradient.prototype=new a.Element.GradientBase;a.Element.stop=function(b){this.base=a.Element.ElementBase;this.base(b);this.offset=this.attribute("offset").numValue();0>this.offset&&(this.offset=0);1<this.offset&&(this.offset=1);b=this.style("stop-color");this.style("stop-opacity").hasValue()&&
(b=b.addOpacity(this.style("stop-opacity").value));this.color=b.value};a.Element.stop.prototype=new a.Element.ElementBase;a.Element.AnimateBase=function(b){this.base=a.Element.ElementBase;this.base(b);a.Animations.push(this);this.duration=0;this.begin=this.attribute("begin").toMilliseconds();this.maxDuration=this.begin+this.attribute("dur").toMilliseconds();this.getProperty=function(){var a=this.attribute("attributeType").value,c=this.attribute("attributeName").value;return"CSS"==a?this.parent.style(c,
!0):this.parent.attribute(c,!0)};this.initialValue=null;this.initialUnits="";this.removed=!1;this.calcValue=function(){return""};this.update=function(a){null==this.initialValue&&(this.initialValue=this.getProperty().value,this.initialUnits=this.getProperty().getUnits());if(this.duration>this.maxDuration)if("indefinite"==this.attribute("repeatCount").value||"indefinite"==this.attribute("repeatDur").value)this.duration=0;else return"remove"==this.attribute("fill").valueOrDefault("remove")&&!this.removed?
(this.removed=!0,this.getProperty().value=this.initialValue,!0):!1;this.duration+=a;a=!1;this.begin<this.duration&&(a=this.calcValue(),this.attribute("type").hasValue()&&(a=this.attribute("type").value+"("+a+")"),this.getProperty().value=a,a=!0);return a};this.from=this.attribute("from");this.to=this.attribute("to");this.values=this.attribute("values");this.values.hasValue()&&(this.values.value=this.values.value.split(";"));this.progress=function(){var e={progress:(this.duration-this.begin)/(this.maxDuration-
this.begin)};if(this.values.hasValue()){var c=e.progress*(this.values.value.length-1),b=Math.floor(c),d=Math.ceil(c);e.from=new a.Property("from",parseFloat(this.values.value[b]));e.to=new a.Property("to",parseFloat(this.values.value[d]));e.progress=(c-b)/(d-b)}else{e.from=this.from;e.to=this.to}return e}};a.Element.AnimateBase.prototype=new a.Element.ElementBase;a.Element.animate=function(b){this.base=a.Element.AnimateBase;this.base(b);this.calcValue=function(){var a=this.progress();return a.from.numValue()+
(a.to.numValue()-a.from.numValue())*a.progress+this.initialUnits}};a.Element.animate.prototype=new a.Element.AnimateBase;a.Element.animateColor=function(b){this.base=a.Element.AnimateBase;this.base(b);this.calcValue=function(){var a=this.progress(),c=new k(a.from.value),b=new k(a.to.value);if(c.ok&&b.ok){var d=c.g+(b.g-c.g)*a.progress,f=c.b+(b.b-c.b)*a.progress;return"rgb("+parseInt(c.r+(b.r-c.r)*a.progress,10)+","+parseInt(d,10)+","+parseInt(f,10)+")"}return this.attribute("from").value}};a.Element.animateColor.prototype=
new a.Element.AnimateBase;a.Element.animateTransform=function(b){this.base=a.Element.AnimateBase;this.base(b);this.calcValue=function(){for(var e=this.progress(),c=a.ToNumberArray(e.from.value),b=a.ToNumberArray(e.to.value),d="",f=0;f<c.length;f++)d+=c[f]+(b[f]-c[f])*e.progress+" ";return d}};a.Element.animateTransform.prototype=new a.Element.animate;a.Element.font=function(b){this.base=a.Element.ElementBase;this.base(b);this.horizAdvX=this.attribute("horiz-adv-x").numValue();this.isArabic=this.isRTL=
!1;this.missingGlyph=this.fontFace=null;this.glyphs=[];for(b=0;b<this.children.length;b++){var e=this.children[b];"font-face"==e.type?(this.fontFace=e,e.style("font-family").hasValue()&&(a.Definitions[e.style("font-family").value]=this)):"missing-glyph"==e.type?this.missingGlyph=e:"glyph"==e.type&&(""!=e.arabicForm?(this.isArabic=this.isRTL=!0,"undefined"==typeof this.glyphs[e.unicode]&&(this.glyphs[e.unicode]=[]),this.glyphs[e.unicode][e.arabicForm]=e):this.glyphs[e.unicode]=e)}};a.Element.font.prototype=
new a.Element.ElementBase;a.Element.fontface=function(b){this.base=a.Element.ElementBase;this.base(b);this.ascent=this.attribute("ascent").value;this.descent=this.attribute("descent").value;this.unitsPerEm=this.attribute("units-per-em").numValue()};a.Element.fontface.prototype=new a.Element.ElementBase;a.Element.missingglyph=function(b){this.base=a.Element.path;this.base(b);this.horizAdvX=0};a.Element.missingglyph.prototype=new a.Element.path;a.Element.glyph=function(b){this.base=a.Element.path;this.base(b);
this.horizAdvX=this.attribute("horiz-adv-x").numValue();this.unicode=this.attribute("unicode").value;this.arabicForm=this.attribute("arabic-form").value};a.Element.glyph.prototype=new a.Element.path;a.Element.text=function(b){this.captureTextNodes=!0;this.base=a.Element.RenderedElementBase;this.base(b);this.baseSetContext=this.setContext;this.setContext=function(a){this.baseSetContext(a);this.style("dominant-baseline").hasValue()&&(a.textBaseline=this.style("dominant-baseline").value);this.style("alignment-baseline").hasValue()&&
(a.textBaseline=this.style("alignment-baseline").value)};this.getBoundingBox=function(){return new a.BoundingBox(this.attribute("x").toPixels("x"),this.attribute("y").toPixels("y"),0,0)};this.renderChildren=function(a){this.x=this.attribute("x").toPixels("x");this.y=this.attribute("y").toPixels("y");this.x+=this.getAnchorDelta(a,this,0);for(var c=0;c<this.children.length;c++)this.renderChild(a,this,c)};this.getAnchorDelta=function(a,c,b){var d=this.style("text-anchor").valueOrDefault("start");if("start"!=
d){for(var f=0,g=b;g<c.children.length;g++){var h=c.children[g];if(g>b&&h.attribute("x").hasValue())break;f+=h.measureTextRecursive(a)}return-1*("end"==d?f:f/2)}return 0};this.renderChild=function(a,c,b){var d=c.children[b];d.attribute("x").hasValue()?d.x=d.attribute("x").toPixels("x")+this.getAnchorDelta(a,c,b):(this.attribute("dx").hasValue()&&(this.x+=this.attribute("dx").toPixels("x")),d.attribute("dx").hasValue()&&(this.x+=d.attribute("dx").toPixels("x")),d.x=this.x);this.x=d.x+d.measureText(a);
d.attribute("y").hasValue()?d.y=d.attribute("y").toPixels("y"):(this.attribute("dy").hasValue()&&(this.y+=this.attribute("dy").toPixels("y")),d.attribute("dy").hasValue()&&(this.y+=d.attribute("dy").toPixels("y")),d.y=this.y);this.y=d.y;d.render(a);for(b=0;b<d.children.length;b++)this.renderChild(a,d,b)}};a.Element.text.prototype=new a.Element.RenderedElementBase;a.Element.TextElementBase=function(b){this.base=a.Element.RenderedElementBase;this.base(b);this.getGlyph=function(a,c,b){var d=c[b],f=null;
if(a.isArabic){var g="isolated";if((0==b||" "==c[b-1])&&b<c.length-2&&" "!=c[b+1])g="terminal";0<b&&(" "!=c[b-1]&&b<c.length-2&&" "!=c[b+1])&&(g="medial");if(0<b&&" "!=c[b-1]&&(b==c.length-1||" "==c[b+1]))g="initial";"undefined"!=typeof a.glyphs[d]&&(f=a.glyphs[d][g],null==f&&"glyph"==a.glyphs[d].type&&(f=a.glyphs[d]))}else f=a.glyphs[d];null==f&&(f=a.missingGlyph);return f};this.renderChildren=function(b){var c=this.parent.style("font-family").getDefinition();if(null!=c){var d=this.parent.style("font-size").numValueOrDefault(a.Font.Parse(a.ctx.font).fontSize),
f=this.parent.style("font-style").valueOrDefault(a.Font.Parse(a.ctx.font).fontStyle),g=this.getText();c.isRTL&&(g=g.split("").reverse().join(""));for(var h=a.ToNumberArray(this.parent.attribute("dx").value),k=0;k<g.length;k++){var l=this.getGlyph(c,g,k),j=d/c.fontFace.unitsPerEm;b.translate(this.x,this.y);b.scale(j,-j);var z=b.lineWidth;b.lineWidth=b.lineWidth*c.fontFace.unitsPerEm/d;"italic"==f&&b.transform(1,0,0.4,1,0,0);l.render(b);"italic"==f&&b.transform(1,0,-0.4,1,0,0);b.lineWidth=z;b.scale(1/
j,-1/j);b.translate(-this.x,-this.y);this.x+=d*(l.horizAdvX||c.horizAdvX)/c.fontFace.unitsPerEm;"undefined"!=typeof h[k]&&!isNaN(h[k])&&(this.x+=h[k])}}else""!=b.fillStyle&&b.fillText(a.compressSpaces(this.getText()),this.x,this.y),""!=b.strokeStyle&&b.strokeText(a.compressSpaces(this.getText()),this.x,this.y)};this.getText=function(){};this.measureTextRecursive=function(a){for(var c=this.measureText(a),b=0;b<this.children.length;b++)c+=this.children[b].measureTextRecursive(a);return c};this.measureText=
function(b){var c=this.parent.style("font-family").getDefinition();if(null!=c){var b=this.parent.style("font-size").numValueOrDefault(a.Font.Parse(a.ctx.font).fontSize),d=0,f=this.getText();c.isRTL&&(f=f.split("").reverse().join(""));for(var g=a.ToNumberArray(this.parent.attribute("dx").value),h=0;h<f.length;h++){var k=this.getGlyph(c,f,h),d=d+(k.horizAdvX||c.horizAdvX)*b/c.fontFace.unitsPerEm;"undefined"!=typeof g[h]&&!isNaN(g[h])&&(d+=g[h])}return d}c=a.compressSpaces(this.getText());if(!b.measureText)return 10*
c.length;b.save();this.setContext(b);c=b.measureText(c).width;b.restore();return c}};a.Element.TextElementBase.prototype=new a.Element.RenderedElementBase;a.Element.tspan=function(b){this.captureTextNodes=!0;this.base=a.Element.TextElementBase;this.base(b);this.text=b.nodeValue||b.text||"";this.getText=function(){return this.text}};a.Element.tspan.prototype=new a.Element.TextElementBase;a.Element.tref=function(b){this.base=a.Element.TextElementBase;this.base(b);this.getText=function(){var a=this.getHrefAttribute().getDefinition();
if(null!=a)return a.children[0].getText()}};a.Element.tref.prototype=new a.Element.TextElementBase;a.Element.a=function(b){this.base=a.Element.TextElementBase;this.base(b);this.hasText=!0;for(var e=0;e<b.childNodes.length;e++)3!=b.childNodes[e].nodeType&&(this.hasText=!1);this.text=this.hasText?b.childNodes[0].nodeValue:"";this.getText=function(){return this.text};this.baseRenderChildren=this.renderChildren;this.renderChildren=function(c){if(this.hasText){this.baseRenderChildren(c);var b=new a.Property("fontSize",
a.Font.Parse(a.ctx.font).fontSize);a.Mouse.checkBoundingBox(this,new a.BoundingBox(this.x,this.y-b.toPixels("y"),this.x+this.measureText(c),this.y))}else b=new a.Element.g,b.children=this.children,b.parent=this,b.render(c)};this.onclick=function(){window.open(this.getHrefAttribute().value)};this.onmousemove=function(){a.ctx.canvas.style.cursor="pointer"}};a.Element.a.prototype=new a.Element.TextElementBase;a.Element.image=function(b){this.base=a.Element.RenderedElementBase;this.base(b);var e=this.getHrefAttribute().value,
c=e.match(/\.svg$/);a.Images.push(this);this.loaded=!1;if(c)this.img=a.ajax(e),this.loaded=!0;else{this.img=document.createElement("img");var d=this;this.img.onload=function(){d.loaded=!0};this.img.onerror=function(){"undefined"!=typeof console&&(console.log('ERROR: image "'+e+'" not found'),d.loaded=!0)};this.img.src=e}this.renderChildren=function(b){var e=this.attribute("x").toPixels("x"),d=this.attribute("y").toPixels("y"),f=this.attribute("width").toPixels("x"),g=this.attribute("height").toPixels("y");
0==f||0==g||(b.save(),c?b.drawSvg(this.img,e,d,f,g):(b.translate(e,d),a.AspectRatio(b,this.attribute("preserveAspectRatio").value,f,this.img.width,g,this.img.height,0,0),b.drawImage(this.img,0,0)),b.restore())};this.getBoundingBox=function(){var c=this.attribute("x").toPixels("x"),b=this.attribute("y").toPixels("y"),e=this.attribute("width").toPixels("x"),d=this.attribute("height").toPixels("y");return new a.BoundingBox(c,b,c+e,b+d)}};a.Element.image.prototype=new a.Element.RenderedElementBase;a.Element.g=
function(b){this.base=a.Element.RenderedElementBase;this.base(b);this.getBoundingBox=function(){for(var b=new a.BoundingBox,c=0;c<this.children.length;c++)b.addBoundingBox(this.children[c].getBoundingBox());return b}};a.Element.g.prototype=new a.Element.RenderedElementBase;a.Element.symbol=function(b){this.base=a.Element.RenderedElementBase;this.base(b);this.baseSetContext=this.setContext;this.setContext=function(b){this.baseSetContext(b);if(this.attribute("viewBox").hasValue()){var c=a.ToNumberArray(this.attribute("viewBox").value),
d=c[0],f=c[1];width=c[2];height=c[3];a.AspectRatio(b,this.attribute("preserveAspectRatio").value,this.attribute("width").toPixels("x"),width,this.attribute("height").toPixels("y"),height,d,f);a.ViewPort.SetCurrent(c[2],c[3])}}};a.Element.symbol.prototype=new a.Element.RenderedElementBase;a.Element.style=function(b){this.base=a.Element.ElementBase;this.base(b);for(var e="",c=0;c<b.childNodes.length;c++)e+=b.childNodes[c].nodeValue;e=e.replace(/(\/\*([^*]|[\r\n]|(\*+([^*\/]|[\r\n])))*\*+\/)|(^[\s]*\/\/.*)/gm,
"");e=a.compressSpaces(e);b=e.split("}");for(c=0;c<b.length;c++)if(""!=a.trim(b[c]))for(var d=b[c].split("{"),e=d[0].split(","),d=d[1].split(";"),f=0;f<e.length;f++){var g=a.trim(e[f]);if(""!=g){for(var h={},k=0;k<d.length;k++){var l=d[k].indexOf(":"),j=d[k].substr(0,l),l=d[k].substr(l+1,d[k].length-l);null!=j&&null!=l&&(h[a.trim(j)]=new a.Property(a.trim(j),a.trim(l)))}a.Styles[g]=h;if("@font-face"==g){g=h["font-family"].value.replace(/"/g,"");h=h.src.value.split(",");for(k=0;k<h.length;k++)if(0<
h[k].indexOf('format("svg")')){j=h[k].indexOf("url");l=h[k].indexOf(")",j);j=h[k].substr(j+5,l-j-6);j=a.parseXml(a.ajax(j)).getElementsByTagName("font");for(l=0;l<j.length;l++){var z=a.CreateElement(j[l]);a.Definitions[g]=z}}}}}};a.Element.style.prototype=new a.Element.ElementBase;a.Element.use=function(b){this.base=a.Element.RenderedElementBase;this.base(b);this.baseSetContext=this.setContext;this.setContext=function(a){this.baseSetContext(a);this.attribute("x").hasValue()&&a.translate(this.attribute("x").toPixels("x"),
0);this.attribute("y").hasValue()&&a.translate(0,this.attribute("y").toPixels("y"))};this.getDefinition=function(){var a=this.getHrefAttribute().getDefinition();this.attribute("width").hasValue()&&(a.attribute("width",!0).value=this.attribute("width").value);this.attribute("height").hasValue()&&(a.attribute("height",!0).value=this.attribute("height").value);return a};this.path=function(a){var c=this.getDefinition();null!=c&&c.path(a)};this.getBoundingBox=function(){var a=this.getDefinition();if(null!=
a)return a.getBoundingBox()};this.renderChildren=function(a){var c=this.getDefinition();if(null!=c){var b=c.parent;c.parent=null;c.render(a);c.parent=b}}};a.Element.use.prototype=new a.Element.RenderedElementBase;a.Element.mask=function(b){this.base=a.Element.ElementBase;this.base(b);this.apply=function(b,c){var d=this.attribute("x").toPixels("x"),f=this.attribute("y").toPixels("y"),g=this.attribute("width").toPixels("x"),h=this.attribute("height").toPixels("y");if(0==g&&0==h){h=new a.BoundingBox;
for(d=0;d<this.children.length;d++)h.addBoundingBox(this.children[d].getBoundingBox());d=Math.floor(h.x1);f=Math.floor(h.y1);g=Math.floor(h.width());h=Math.floor(h.height())}var k=c.attribute("mask").value;c.attribute("mask").value="";var l=document.createElement("canvas");l.width=d+g;l.height=f+h;var j=l.getContext("2d");this.renderChildren(j);var z=document.createElement("canvas");z.width=d+g;z.height=f+h;var o=z.getContext("2d");c.render(o);o.globalCompositeOperation="destination-in";o.fillStyle=
j.createPattern(l,"no-repeat");o.fillRect(0,0,d+g,f+h);b.fillStyle=o.createPattern(z,"no-repeat");b.fillRect(0,0,d+g,f+h);c.attribute("mask").value=k};this.render=function(){}};a.Element.mask.prototype=new a.Element.ElementBase;a.Element.clipPath=function(b){this.base=a.Element.ElementBase;this.base(b);this.apply=function(b){for(var c=0;c<this.children.length;c++){var d=this.children[c];if("undefined"!=typeof d.path){var f=null;d.attribute("transform").hasValue()&&(f=new a.Transform(d.attribute("transform").value),
f.apply(b));d.path(b);b.clip();f&&f.unapply(b)}}};this.render=function(){}};a.Element.clipPath.prototype=new a.Element.ElementBase;a.Element.filter=function(b){this.base=a.Element.ElementBase;this.base(b);this.apply=function(a,c){var b=c.getBoundingBox(),d=Math.floor(b.x1),f=Math.floor(b.y1),g=Math.floor(b.width()),b=Math.floor(b.height()),h=c.style("filter").value;c.style("filter").value="";for(var k=0,l=0,j=0;j<this.children.length;j++)var o=this.children[j].extraFilterDistance||0,k=Math.max(k,
o),l=Math.max(l,o);o=document.createElement("canvas");o.width=g+2*k;o.height=b+2*l;var q=o.getContext("2d");q.translate(-d+k,-f+l);c.render(q);for(j=0;j<this.children.length;j++)this.children[j].apply(q,0,0,g+2*k,b+2*l);a.drawImage(o,0,0,g+2*k,b+2*l,d-k,f-l,g+2*k,b+2*l);c.style("filter",!0).value=h};this.render=function(){}};a.Element.filter.prototype=new a.Element.ElementBase;a.Element.feMorphology=function(b){this.base=a.Element.ElementBase;this.base(b);this.apply=function(){}};a.Element.feMorphology.prototype=
new a.Element.ElementBase;a.Element.feColorMatrix=function(b){this.base=a.Element.ElementBase;this.base(b);this.apply=function(a,c,b,d,f){for(var g=a.getImageData(0,0,d,f),b=0;b<f;b++)for(c=0;c<d;c++){var h=(g.data[4*b*d+4*c+0]+g.data[4*b*d+4*c+1]+g.data[4*b*d+4*c+2])/3;g.data[4*b*d+4*c+0]=h;g.data[4*b*d+4*c+1]=h;g.data[4*b*d+4*c+2]=h}a.clearRect(0,0,d,f);a.putImageData(g,0,0)}};a.Element.feColorMatrix.prototype=new a.Element.ElementBase;a.Element.feGaussianBlur=function(b){this.base=a.Element.ElementBase;
this.base(b);this.extraFilterDistance=this.blurRadius=Math.floor(this.attribute("stdDeviation").numValue());this.apply=function(b,c,d,f,g){"undefined"==typeof j?"undefined"!=typeof console&&console.log("ERROR: StackBlur.js must be included for blur to work"):(b.canvas.id=a.UniqueId(),b.canvas.style.display="none",document.body.appendChild(b.canvas),j(b.canvas.id,c,d,f,g,this.blurRadius),document.body.removeChild(b.canvas))}};a.Element.feGaussianBlur.prototype=new a.Element.ElementBase;a.Element.title=
function(){};a.Element.title.prototype=new a.Element.ElementBase;a.Element.desc=function(){};a.Element.desc.prototype=new a.Element.ElementBase;a.Element.MISSING=function(a){"undefined"!=typeof console&&console.log("ERROR: Element '"+a.nodeName+"' not yet implemented.")};a.Element.MISSING.prototype=new a.Element.ElementBase;a.CreateElement=function(b){var d=b.nodeName.replace(/^[^:]+:/,""),d=d.replace(/\-/g,""),c=null,c="undefined"!=typeof a.Element[d]?new a.Element[d](b):new a.Element.MISSING(b);
c.type=b.nodeName;return c};a.load=function(b,d){a.loadXml(b,a.ajax(d))};a.loadXml=function(b,d){a.loadXmlDoc(b,a.parseXml(d))};a.loadXmlDoc=function(b,d){a.init(b);var c=function(a){for(var c=b.canvas;c;)a.x-=c.offsetLeft,a.y-=c.offsetTop,c=c.offsetParent;window.scrollX&&(a.x+=window.scrollX);window.scrollY&&(a.y+=window.scrollY);return a};!0!=a.opts.ignoreMouse&&(b.canvas.onclick=function(b){b=c(new a.Point(null!=b?b.clientX:event.clientX,null!=b?b.clientY:event.clientY));a.Mouse.onclick(b.x,b.y)},
b.canvas.onmousemove=function(b){b=c(new a.Point(null!=b?b.clientX:event.clientX,null!=b?b.clientY:event.clientY));a.Mouse.onmousemove(b.x,b.y)});var f=a.CreateElement(d.documentElement),g=f.root=!0,h=function(){a.ViewPort.Clear();b.canvas.parentNode&&a.ViewPort.SetCurrent(b.canvas.parentNode.clientWidth,b.canvas.parentNode.clientHeight);if(a.opts.ignoreDimensions!=true){if(f.style("width").hasValue()){b.canvas.width=f.style("width").toPixels("x");b.canvas.style.width=b.canvas.width+"px"}if(f.style("height").hasValue()){b.canvas.height=
f.style("height").toPixels("y");b.canvas.style.height=b.canvas.height+"px"}}var c=b.canvas.clientWidth||b.canvas.width,h=b.canvas.clientHeight||b.canvas.height;if(a.opts.ignoreDimensions==true&&f.style("width").hasValue()&&f.style("height").hasValue()){c=f.style("width").toPixels("x");h=f.style("height").toPixels("y")}a.ViewPort.SetCurrent(c,h);if(a.opts.offsetX!=null)f.attribute("x",true).value=a.opts.offsetX;if(a.opts.offsetY!=null)f.attribute("y",true).value=a.opts.offsetY;if(a.opts.scaleWidth!=
null&&a.opts.scaleHeight!=null){var k=1,l=1,j=a.ToNumberArray(f.attribute("viewBox").value);f.attribute("width").hasValue()?k=f.attribute("width").toPixels("x")/a.opts.scaleWidth:isNaN(j[2])||(k=j[2]/a.opts.scaleWidth);f.attribute("height").hasValue()?l=f.attribute("height").toPixels("y")/a.opts.scaleHeight:isNaN(j[3])||(l=j[3]/a.opts.scaleHeight);f.attribute("width",true).value=a.opts.scaleWidth;f.attribute("height",true).value=a.opts.scaleHeight;f.attribute("viewBox",true).value="0 0 "+c*k+" "+
h*l;f.attribute("preserveAspectRatio",true).value="none"}a.opts.ignoreClear!=true&&b.clearRect(0,0,c,h);f.render(b);if(g){g=false;typeof a.opts.renderCallback=="function"&&a.opts.renderCallback(d)}},k=!0;a.ImagesLoaded()&&(k=!1,h());a.intervalID=setInterval(function(){var b=false;if(k&&a.ImagesLoaded()){k=false;b=true}a.opts.ignoreMouse!=true&&(b=b|a.Mouse.hasEvents());if(a.opts.ignoreAnimation!=true)for(var c=0;c<a.Animations.length;c++)b=b|a.Animations[c].update(1E3/a.FRAMERATE);typeof a.opts.forceRedraw==
"function"&&a.opts.forceRedraw()==true&&(b=true);if(b){h();a.Mouse.runEvents()}},1E3/a.FRAMERATE)};a.stop=function(){a.intervalID&&clearInterval(a.intervalID)};a.Mouse=new function(){this.events=[];this.hasEvents=function(){return 0!=this.events.length};this.onclick=function(a,d){this.events.push({type:"onclick",x:a,y:d,run:function(a){if(a.onclick)a.onclick()}})};this.onmousemove=function(a,d){this.events.push({type:"onmousemove",x:a,y:d,run:function(a){if(a.onmousemove)a.onmousemove()}})};this.eventElements=
[];this.checkPath=function(a,d){for(var c=0;c<this.events.length;c++){var f=this.events[c];d.isPointInPath&&d.isPointInPath(f.x,f.y)&&(this.eventElements[c]=a)}};this.checkBoundingBox=function(a,d){for(var c=0;c<this.events.length;c++){var f=this.events[c];d.isPointInBox(f.x,f.y)&&(this.eventElements[c]=a)}};this.runEvents=function(){a.ctx.canvas.style.cursor="";for(var b=0;b<this.events.length;b++)for(var d=this.events[b],c=this.eventElements[b];c;)d.run(c),c=c.parent;this.events=[];this.eventElements=
[]}};return a}this.canvg=function(a,b,e){if(null==a&&null==b&&null==e)for(var b=document.getElementsByTagName("svg"),c=0;c<b.length;c++){a=b[c];e=document.createElement("canvas");e.width=a.clientWidth;e.height=a.clientHeight;a.parentNode.insertBefore(e,a);a.parentNode.removeChild(a);var f=document.createElement("div");f.appendChild(a);canvg(e,f.innerHTML)}else e=e||{},"string"==typeof a&&(a=document.getElementById(a)),null!=a.svg&&a.svg.stop(),c=d(),1==a.childNodes.length&&"OBJECT"==a.childNodes[0].nodeName||
(a.svg=c),c.opts=e,a=a.getContext("2d"),"undefined"!=typeof b.documentElement?c.loadXmlDoc(a,b):"<"==b.substr(0,1)?c.loadXml(a,b):c.load(a,b)}})();"undefined"!=typeof CanvasRenderingContext2D&&(CanvasRenderingContext2D.prototype.drawSvg=function(d,a,b,e,c){canvg(this.canvas,d,{ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0,ignoreClear:!0,offsetX:a,offsetY:b,scaleWidth:e,scaleHeight:c})});return canvg}},1:{value:function(){function k(a,b,d){var c=a.container.getRenderBox(),f=l,g=a.node.ownerDocument,
h=c.width,c=c.height,a=a.node,k=a.ownerDocument.createElement("div"),j=['<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="',a.getAttribute("width"),'" height="',a.getAttribute("height"),'">'];k.appendChild(a.cloneNode(!0));a=k.innerHTML.replace(/<svg[^>]+?>/i,j.join("")).replace(/&nbsp;/g,"");return f(g,{width:h,height:c,content:a},b,d)}function l(a,b,d,c){f.apply(null,arguments)}function d(a,b,d,c){var a=a.createElement("canvas"),f=a.getContext("2d");a.width=
b;a.height=d;"image/png"!==c&&(f.fillStyle="white",f.fillRect(0,0,a.width,a.height));return a}function f(a,b,e,c){var f=d(a,b.width,b.height,e);f.style.cssText="position: absolute; top: 0; left: 100000px; z-index: -1;";window.setTimeout(function(){a.body.appendChild(f);h(f,b.content);a.body.removeChild(f);c(f.toDataURL(e))},0)}var g=j.r(45),h=j.r(0);return g.createClass("Output",{constructor:function(a){this.formula=a},toJPG:function(a){k(this.formula,"image/jpeg",a)},toPNG:function(a){k(this.formula,
"image/png",a)}})}},2:{value:function(){return"0 1 2 3 4 5 6 7 8 9 A B C D E F G H I J K L M N O P Q R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s t u v w x y z &#x237; &#x131; &#x3b1; &#x3b2; &#x3b3; &#x3b4; &#x3b5; &#x3b6; &#x3b7; &#x3b8; &#x3b9; &#x3ba; &#x3bb; &#x3bc; &#x3bd; &#x3be; &#x3bf; &#x3c0; &#x3c1; &#x3c2; &#x3c3; &#x3c4; &#x3c5; &#x3c6; &#x3c7; &#x3c8; &#x3c9; &#x3d1; &#x3d5; &#x3d6; &#x3de; &#x3dc; &#x3f5; &#x3f1; &#x3f9; &#x211c; &#x2135; &#x2111; &#x2127; &#x2136; &#x2137; &#x2138; &#xf0; &#x210f; &#x2141; &#x210e; &#x2202; &#x2118; &#x214c; &#x2132; &#x2201; &#x2113; &#x24c8; ( ) &#x393; &#x394; &#x395; &#x396; &#x397; &#x398; &#x399; &#x39a; &#x39b; &#x39c; &#x39d; &#x39e; &#x39f; &#x3a0; &#x3a1; &#x3a3; &#x3a4; &#x3a5; &#x3a6; &#x3a7; &#x3a8; &#x3a9; &#x391; &#x392; # ! $ % &#x26; &#x2220; &#x2032; &#x2035; &#x2605; &#x25c6; &#x25a0; &#x25b2; &#x25bc; &#x22a4; &#x22a5; &#x2663; &#x2660; &#x2662; &#x2661; &#x2203; &#x2204; &#x266d; &#x266e; &#x266f; &#x2200; &#x221e; &#x2221; &#x2207; &#xac; &#x2222; &#x221a; &#x25b3; &#x25bd; &#x2205; &#xf8; &#x25c7; &#x25c0; &#x25b8; [ ] { } &#x3008; &#x3009; &#x3f0; , . / : ; ? \\ &#x22ee; &#x22ef; &#x22f0; &#x2026; @ &#x22; ' | ^ ` &#x201c; _ * + - &#x2210; &#x22bc; &#x22bb; &#x25ef; &#x22a1; &#x229f; &#x229e; &#x22a0; &#x2022; &#x2229; &#x222a; &#x22d2; &#x22d3; &#x22d0; &#x22d1; &#xb7; &#x25aa; &#x25e6; &#x229b; &#x229a; &#x2296; &#x2299; &#x229d; &#x2295; &#x2297; &#x2298; &#xb1; &#x2213; &#x22cf; &#x22ce; &#x2020; &#x2021; &#x22c4; &#xf7; &#x22c7; &#x2214; &#x232d; &#x22d7; &#x22d6; &#x22c9; &#x22ca; &#x22cb; &#x22cc; &#x2293; &#x2294; &#x2291; &#x2292; &#x228f; &#x2290; &#x22c6; &#xd7; &#x22b3; &#x22b2; &#x22b5; &#x22b4; &#x228e; &#x2228; &#x2227; &#x2240; &#x3c; = &#x3e; &#x2248; &#x2247; &#x224d; &#x2252; &#x2253; &#x224a; &#x223d; &#x2241; &#x2242; &#x2243; &#x22cd; &#x224f; &#x224e; &#x2257; &#x2245; &#x22de; &#x22df; &#x2250; &#x2251; &#x2256; &#x2a96; &#x2a95; &#x2261; &#x2265; &#x2264; &#x2266; &#x2267; &#x2a7e; &#x2a7d; &#x226b; &#x226a; &#x2268; &#x2269; &#x22d8; &#x22d9; &#x2a87; &#x2a88; &#x2a89; &#x2a8a; &#x22e7; &#x22e6; &#x2a86; &#x2a85; &#x22db; &#x22da; &#x2a8b; &#x2a8c; &#x2277; &#x2276; &#x2273; &#x2272; &#x232e; &#x232f; &#x226f; &#x2271; &#x2270; &#x226e; &#x2331; &#x2330; &#x2332; &#x2333; &#x226c; &#x2280; &#x2281; &#x22e0; &#x22e1; &#x227a; &#x227b; &#x227c; &#x227d; &#x227e; &#x227f; &#x2282; &#x2283; &#x2288; &#x2289; &#x2286; &#x2287; &#x228a; &#x228b; &#x2ab7; &#x2ab8; &#x2aaf; &#x2ab0; &#x2ab9; &#x2aba; &#x2ab5; &#x2ab6; &#x22e8; &#x22e9; &#x223c; &#x225c; &#x21b6; &#x21b7; &#x21ba; &#x21bb; &#x21be; &#x21bf; &#x21c2; &#x21c3; &#x21c4; &#x21c6; &#x21c8; &#x21ca; &#x21cb; &#x21cc; &#x21cd; &#x21ce; &#x21cf; &#x21d0; &#x21d1; &#x21d2; &#x21d3; &#x21d4; &#x21d5; &#x21da; &#x21db; &#x21dd; &#x21ab; &#x21ac; &#x21ad; &#x21ae; &#x2190; &#x2191; &#x2192; &#x2193; &#x2194; &#x2195; &#x2196; &#x2197; &#x2198; &#x2199; &#x219e; &#x21a0; &#x21a2; &#x21a3; &#x21b0; &#x21b1; &#x22a2; &#x22a3; &#x22a8; &#x22a9; &#x22aa; &#x22ad; &#x22af; &#x22b8; &#x22ba; &#x22d4; &#x22ea; &#x22eb; &#x22ec; &#x22ed; &#x2308; &#x2309; &#x230a; &#x230b; &#x2acb; &#x2acc; &#x2ac5; &#x2ac6; &#x2208; &#x220b; &#x221d; &#x2224; &#x2226; &#x2234; &#x2235; &#x220d; &#x22c8; &#x2322; &#x2323; &#x2223; &#x2225; &#x23d0; &#x23d1; &#x23d2; &#x23d3; &#x2ac7; &#x2ac8; &#x22ae; &#x22ac; &#x2ac9; &#x23d4; &#x23d5; &#x23d6; &#x23d7; &#x21c7; &#x21c9; &#x21bc; &#x21bd; &#x21c0; &#x21c1; &#x219a; &#x219b; &#x27f5; &#x27f6; &#x27f7; &#x27f9; &#x27f8; &#x27fa; &#x2262; &#x2260; &#x2209;".split(" ")}},
3:{value:function(){return{defaultFont:"KF AMS MAIN"}}},4:{value:function(){var k=j.r(45),l=document.createElement("div");return{create:function(d){var f=new k.Text;"innerHTML"in f.node?f.node.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"):-1!=d.indexOf(" ")&&(l.innerHTML='<svg><text gg="asfdas">'+d.replace(/\s/gi,"&nbsp;")+"</text></svg>",d=l.firstChild.firstChild.textContent);f.setContent(d);return f}}}},5:{value:function(){var k=j.r(45),l=j.r(68).font,d=j.r(35),f=
j.r(4);return k.createClass("Text",{base:j.r(67),constructor:function(d,f){this.callBase();this.fontFamily=f;this.fontSize=50;this.content=d||"";this.box.remove();this.translationContent=this.translation(this.content);this.contentShape=new k.Group;this.contentNode=this.createContent();this.contentShape.addShape(this.contentNode);this.addShape(this.contentShape)},createContent:function(){var d=f.create(this.translationContent);d.setAttr({"font-family":this.fontFamily,"font-size":50,x:0,y:l.offset});
return d},setFamily:function(d){this.fontFamily=d;this.contentNode.setAttr("font-family",d)},setFontSize:function(d){this.fontSize=d;this.contentNode.setAttr("font-size",d+"px");this.contentNode.setAttr("y",d/50*l.offset)},getBaseHeight:function(){for(var d=this.contentShape.getItems(),f=null,a=0,b=0;f=d[a];)b=Math.max(b,f.getHeight()),a++;return b},translation:function(f){var h=this.fontFamily;return f.replace(/``/g,"“").replace(/\\([a-zA-Z,]+)\\/g,function(a,b){if(","===b)return" ";var e=d.getCharacterValue(b,
h);return!e?"":e})}})}},6:{value:function(){return{UNKNOWN:-1,EXP:0,COMPOUND_EXP:1,OP:2}}},7:{value:function(){return{SIDE:"side",FOLLOW:"follow"}}},8:{value:function(){return j.r(45).createClass("SubscriptExpression",{base:j.r(24),constructor:function(k,l){this.callBase(k,null,l);this.setFlag("Subscript")}})}},9:{value:function(){return j.r(45).createClass("SuperscriptExpression",{base:j.r(24),constructor:function(k,l){this.callBase(k,l,null);this.setFlag("Superscript")}})}},10:{value:function(){return j.r(45).createClass("BinaryExpression",
{base:j.r(29),constructor:function(k,l){this.callBase();this.setFirstOperand(k);this.setLastOperand(l)},setFirstOperand:function(k){return this.setOperand(k,0)},getFirstOperand:function(){return this.getOperand(0)},setLastOperand:function(k){return this.setOperand(k,1)},getLastOperand:function(){return this.getOperand(1)}})}},11:{value:function(){var k=j.r(45),l=j.r(46);return k.createClass("BracketsExpression",{base:j.r(29),constructor:function(d,f,g){this.callBase();this.setFlag("Brackets");2===
arguments.length&&(g=f,f=d);this.leftSymbol=d;this.rightSymbol=f;this.setOperator(new l);this.setOperand(g,0)},getLeftSymbol:function(){return this.leftSymbol},getRightSymbol:function(){return this.rightSymbol}})}},12:{value:function(){var k=j.r(45),l=j.r(47);return k.createClass("CasesExpression",{base:j.r(29),constructor:function(){var d=arguments;this.callBase();this.setFlag("Cases");this.setOperator(new l);for(var f=0,g=d.length;f<g;f++)this.setOperand(d[f],f)}})}},13:{value:function(){var k=
j.r(45),l=j.r(68).font,d=j.r(48);return k.createClass("CombinationExpression",{base:j.r(29),constructor:function(){this.callBase();this.setFlag("Combination");this.setOperator(new d);k.Utils.each(arguments,function(d,g){this.setOperand(d,g)},this)},getRenderBox:function(d){d=this.callBase(d);0===this.getOperands().length&&(d.height=l.spaceHeight);return d},getBaseline:function(d){var g=0,h=this.getOperands();if(0===h.length)return this.callBase(d);k.Utils.each(h,function(a){g=Math.max(a.getBaseline(d),
g)});return g},getMeanline:function(d){var g=1E7,h=this.getOperands();if(0===h.length)return this.callBase(d);k.Utils.each(h,function(a){g=Math.min(a.getMeanline(d),g)});return g}})}},14:{value:function(){var k=j.r(45),l=j.r(50);return k.createClass("FractionExpression",{base:j.r(10),constructor:function(d,f){this.callBase(d,f);this.setFlag("Fraction");this.setOperator(new l)},setZoom:function(d){return this.getOperator().setZoom(d)},getBaseline:function(d){var f=this.getOperand(1),d=f.getRenderBox(d);
return d.y+f.getBaselineProportion()*d.height},getMeanline:function(d){var f=this.getOperand(0),d=f.getRenderBox(d);return f.getMeanlineProportion()*d.height}})}},15:{value:function(){var k=j.r(45),l=j.r(68).func,d=j.r(51);return k.createClass("FunctionExpression",{base:j.r(29),constructor:function(f,g,h,a){this.callBase();this.setFlag("Func");this.funcName=f;this.setOperator(new d(f));this.setExpr(g);this.setSuperscript(h);this.setSubscript(a)},isSideScript:function(){return!l["ud-script"][this.funcName]},
setExpr:function(d){return this.setOperand(d,0)},setSuperscript:function(d){return this.setOperand(d,1)},setSubscript:function(d){return this.setOperand(d,2)}})}},16:{value:function(){var k=j.r(45),l=j.r(52);return k.createClass("HatExpression",{base:j.r(29),constructor:function(d){this.callBase();this.setFlag("Hat");this.setOperator(new l);this.setOperand(d,0)},setType:function(d){this.getOperator().setType(d);return this}})}},17:{value:function(){var k=j.r(45),l=j.r(53);return k.createClass("IntegrationExpression",
{base:j.r(29),constructor:function(d,f,g){this.callBase();this.setFlag("Integration");this.setOperator(new l);this.setIntegrand(d);this.setSuperscript(f);this.setSubscript(g)},setType:function(d){this.getOperator().setType(d);return this},resetType:function(){this.getOperator().resetType();return this},setIntegrand:function(d){this.setOperand(d,0)},setSuperscript:function(d){this.setOperand(d,1)},setSubscript:function(d){this.setOperand(d,2)}})}},18:{value:function(){var k=j.r(45),l=j.r(54);return k.createClass("MatrixExpression",
{base:j.r(29),constructor:function(){var d=arguments;this.callBase();this.mtype=null;this.colNum=0;this.setFlag("Matrix");this.setOperator(new l);for(var f=0,g=d.length;f<g;f++)this.setOperand(d[f],f)},setType:function(d){this.mtype=d;return this},setColNum:function(d){this.colNum=d;return this},getColNum:function(){return this.colNum}})}},19:{value:function(){var k=j.r(45),l=j.r(56);return k.createClass("OverlineExpression",{base:j.r(29),constructor:function(d){this.callBase();this.setFlag("Overline");
this.setOperator(new l);this.setOperand(d,0)}})}},20:{value:function(){var k=j.r(45),l=j.r(57);return k.createClass("OverparenExpression",{base:j.r(29),constructor:function(d){this.callBase();this.setFlag("Overparen");this.setOperator(new l);this.setOperand(d,0)}})}},21:{value:function(){var k=j.r(45),l=j.r(58);return k.createClass("PmodExpression",{base:j.r(29),constructor:function(d){this.callBase();this.setFlag("PMod");this.setOperator(new l);this.setOperand(d,0)}})}},22:{value:function(){var k=
j.r(45),l=j.r(59);return k.createClass("ProductExpression",{base:j.r(29),constructor:function(d,f,g){this.callBase();this.setFlag("Product");this.setOperator(new l);this.setExpr(d);this.setSuperscript(f);this.setSubscript(g)},setExpr:function(d){this.setOperand(d,0)},setSuperscript:function(d){this.setOperand(d,1)},setSubscript:function(d){this.setOperand(d,2)}})}},23:{value:function(){var k=j.r(45),l=j.r(60);return k.createClass("RadicalExpression",{base:j.r(10),constructor:function(d,f){this.callBase(d,
f);this.setFlag("Radicand");this.setOperator(new l)},setRadicand:function(d){return this.setFirstOperand(d)},getRadicand:function(){return this.getFirstOperand()},setExponent:function(d){return this.setLastOperand(d)},getExponent:function(){return this.getLastOperand()}})}},24:{value:function(){var k=j.r(45),l=j.r(61);return k.createClass("ScriptExpression",{base:j.r(29),constructor:function(d,f,g){this.callBase();this.setFlag("Script");this.setOperator(new l);this.setOpd(d);this.setSuperscript(f);
this.setSubscript(g)},setOpd:function(d){this.setOperand(d,0)},setSuperscript:function(d){this.setOperand(d,1)},setSubscript:function(d){this.setOperand(d,2)}})}},25:{value:function(){var k=j.r(45),l=j.r(62);return k.createClass("SplitExpression",{base:j.r(29),constructor:function(){this.callBase();this.setFlag("Split");this.setOperator(new l);for(var d=0,f=arguments.length;d<f;d++)this.setOperand(arguments[d],d)}})}},26:{value:function(){var k=j.r(45),l=j.r(63);return k.createClass("SummationExpression",
{base:j.r(29),constructor:function(d,f,g){this.callBase();this.setFlag("Summation");this.setOperator(new l);this.setExpr(d);this.setSuperscript(f);this.setSubscript(g)},setExpr:function(d){this.setOperand(d,0)},setSuperscript:function(d){this.setOperand(d,1)},setSubscript:function(d){this.setOperand(d,2)}})}},27:{value:function(){var k=j.r(45),l="⓪①②③④⑤⑥⑦⑧⑨⑩".split(""),d=j.r(64);return k.createClass("TextcircledExpression",{base:j.r(29),constructor:function(f){this.callBase();this.setFlag("Textcircled");
this.setOperator(new d);this.setOperand(l[f-0],0)}})}},28:{value:function(){var k=j.r(45),l=j.r(65);return k.createClass("UnderbraceExpression",{base:j.r(29),constructor:function(d,f){this.callBase();this.setFlag("Underbrace");this.setOperator(new l);this.setOperand(d,0);this.setOperand(f,1)}})}},29:{value:function(){var k=j.r(45),l=j.r(6),d=j.r(31);return k.createClass("CompoundExpression",{base:j.r(31),constructor:function(){this.callBase();this.type=l.COMPOUND_EXP;this.operands=[];this.operator=
null;this.operatorBox=new k.Group;this.operatorBox.setAttr("data-type","kf-editor-exp-op-box");this.operandBox=new k.Group;this.operandBox.setAttr("data-type","kf-editor-exp-operand-box");this.setChildren(0,this.operatorBox);this.setChildren(1,this.operandBox)},setOperator:function(d){if(void 0===d)return this;this.operator&&this.operator.remove();this.operatorBox.addShape(d);this.operator=d;this.operator.setParentExpression(this);d.expression=this;return this},getOperator:function(){return this.operator},
setOperand:function(f,g,h){if(!1===h)return this.operands[g]=f,this;f=d.wrap(f);this.operands[g]&&this.operands[g].remove();this.operands[g]=f;this.operandBox.addShape(f);return this},getOperand:function(d){return this.operands[d]},getOperands:function(){return this.operands},addedCall:function(){this.operator&&this.operator.applyOperand.apply(this.operator,this.operands);return this}})}},30:{value:function(){var k=j.r(45),l=j.r(68).font,d=j.r(31),f=k.createClass("EmptyExpression",{base:d,constructor:function(){this.callBase();
this.setFlag("Empty")},getRenderBox:function(){return{width:0,height:l.spaceHeight,x:0,y:0}}});f.isEmpty=function(d){return d instanceof f};d.registerWrap("empty",function(d){if(null===d||void 0===d)return new f});return f}},31:{value:function(){var k=j.r(45),l=j.r(6),d=j.r(68).font,f=[],g={},h=k.createClass("Expression",{base:j.r(67),constructor:function(){this.callBase();this.type=l.EXP;this._offset={top:0,bottom:0};this.children=[];this.box.fill("transparent").setAttr("data-type","kf-editor-exp-box");
this.box.setAttr("data-type","kf-editor-exp-bg-box");this.expContent=new k.Group;this.expContent.setAttr("data-type","kf-editor-exp-content-box");this.addShape(this.expContent)},getChildren:function(){return this.children},getChild:function(a){return this.children[a]||null},getTopOffset:function(){return this._offset.top},getBottomOffset:function(){return this._offset.bottom},getOffset:function(){return this._offset},setTopOffset:function(a){this._offset.top=a},setBottomOffset:function(a){this._offset.bottom=
a},setOffset:function(a,b){this._offset.top=a;this._offset.bottom=b},setFlag:function(a){this.setAttr("data-flag",a||"Expression")},setChildren:function(a,b){this.children[a]&&this.children[a].remove();this.children[a]=b;this.expContent.addShape(b)},getBaselineProportion:function(){return d.baselinePosition},getMeanlineProportion:function(){return d.meanlinePosition},getBaseline:function(a){return this.getRenderBox(a).height*d.baselinePosition-3},getMeanline:function(a){return this.getRenderBox(a).height*
d.meanlinePosition-1},getAscenderline:function(){return this.getFixRenderBox().height*d.ascenderPosition},getDescenderline:function(){return this.getFixRenderBox().height*d.descenderPosition},translateElement:function(a,b){this.expContent.translate(a,b)},expand:function(a,b){var d=this.getFixRenderBox();this.setBoxSize(d.width+a,d.height+b)},getBaseWidth:function(){return this.getWidth()},getBaseHeight:function(){return this.getHeight()},updateBoxSize:function(){var a=this.expContent.getFixRenderBox();
this.setBoxSize(a.width,a.height)},getBox:function(){return this.box}});k.Utils.extend(h,{registerWrap:function(a,b){g[a]=f.length;f.push(b)},revokeWrap:function(a){var b=null;a in g&&(b=f[g[a]],f[g[a]]=null,delete g[a]);return b},wrap:function(a){var b;k.Utils.each(f,function(d){if(d&&(b=d(a)))return!1});return b}});return h}},32:{value:function(){var k=j.r(5),l=j.r(45),d="⓪①②③④⑤⑥⑦⑧⑨⑩".split(""),f=j.r(3),g=j.r(31),h=l.createClass("TextExpression",{base:j.r(31),constructor:function(a,b){this.callBase();
this.fontFamily=b||f.defaultFont;this.setFlag("Text");this.content=a+"";"textcircled"===this.fontFamily&&(this.fontFamily=f.defaultFont,this.content=d[this.content-0]);this.textContent=new k(this.content,this.fontFamily);this.setChildren(0,this.textContent);this.setChildren(1,(new l.Rect(0,0,0,0)).fill("transparent"))},setFamily:function(a){this.textContent.setFamily(a)},setFontSize:function(a){this.textContent.setFontSize(a)},addedCall:function(){var a=this.textContent.getFixRenderBox();this.getChild(1).setSize(a.width,
a.height);this.updateBoxSize();return this}});g.registerWrap("text",function(a){var b=typeof a;if("number"===b||"string"===b)a=new h(a);return a});return h}},33:{value:function(){return['<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">','<text id="abcd" font-family="KF AMS MAIN" font-size="50" x="0" y="0">x</text>',"</svg>"]}},34:{value:function(){function k(d,c,f){window.setTimeout(function(){var g=document.createElement("div"),h=c.meta.fontFamily;g.style.cssText=
"position: absolute; top: -10000px; left: -100000px;";g.style.fontFamily=h;g.innerHTML=a.join("");d.body.appendChild(g);b.push(g);f()},0)}function l(a,b){window.setTimeout(function(){var f=a.createElement("div");f.style.cssText="position: absolute; top: 0; left: -100000px;";f.innerHTML=j.r(33).join("");a.body.appendChild(f);var g=f.getElementsByTagName("text")[0].getBBox();h.spaceHeight=g.height;h.topSpace=-g.y-h.baseline;h.bottomSpace=h.spaceHeight-h.topSpace-h.baseHeight;h.offset=h.baseline+h.topSpace;
h.baselinePosition=(h.topSpace+h.baseline)/h.spaceHeight;h.meanlinePosition=(h.topSpace+h.meanline)/h.spaceHeight;h.ascenderPosition=h.topSpace/h.spaceHeight;h.descenderPosition=(h.topSpace+h.baseHeight)/h.spaceHeight;a.body.removeChild(f);d();b()},0)}function d(){f.Utils.each(b,function(a){a.parentNode.removeChild(a)});b=[]}var f=j.r(45),g=j.r(35),h=j.r(68).font,a=j.r(2),b=[];return f.createClass("FontInstaller",{constructor:function(a,b){this.callBase();this.resource=b||"../src/resource/";this.doc=
a},mount:function(a){var b=g.getFontList(),d=0,h=this;f.Utils.each(b,function(b){d++;b.meta.src=h.resource+b.meta.src;h.createFontStyle(b);k(h.doc,b,function(){d--;0===d&&l(h.doc,a)})})},createFontStyle:function(a){var b=this.doc.createElement("style");b.setAttribute("type","text/css");b.innerHTML='@font-face{\nfont-family: "${fontFamily}";\nsrc: url("${src}");\n}'.replace("${fontFamily}",a.meta.fontFamily).replace("${src}",a.meta.src);this.doc.head.appendChild(b)}})}},35:{value:function(){var k=
{},l=j.r(45),
        d=j.r(68).font.list;(function(){l.Utils.each(d,function(d){k[d.meta.fontFamily]=d})})();return{getFontList:function(){return k},getCharacterValue:function(d,g){return!k[g]?null:k[g].map[d]||null}}}},36:{value:function(){return{meta:{fontFamily:"KF AMS BB",src:"KF_AMS_BB.woff"}}}},37:{value:function(){return{meta:{fontFamily:"KF AMS BOLD",src:"KF_AMS_BOLD.woff"}}}},38:{value:function(){return{meta:{fontFamily:"KF AMS CAL",src:"KF_AMS_CAL.woff"}}}},39:{value:function(){return{meta:{fontFamily:"KF AMS FRAK",
src:"KF_AMS_FRAK.woff"}}}},40:{value:function(){return{meta:{fontFamily:"KF AMS MAIN",src:"KF_AMS_MAIN.woff"},
        map:{Alpha:"Α",Beta:"Β",Gamma:"Γ",Delta:"Δ",Epsilon:"Ε",Zeta:"Ζ",Eta:"Η",Theta:"Θ",Iota:"Ι",Kappa:"Κ",Lambda:"Λ",Mu:"Μ",Nu:"Ν",Xi:"Ξ",Omicron:"Ο",Pi:"Π",Rho:"Ρ",Sigma:"Σ",Tau:"Τ",Upsilon:"Υ",Phi:"Φ",Chi:"Χ",Psi:"Ψ",Omega:"Ω",alpha:"α",beta:"β",gamma:"γ",delta:"δ",epsilon:"ε",zeta:"ζ",eta:"η",theta:"θ",iota:"ι",kappa:"κ",lambda:"λ",mu:"μ",nu:"ν",xi:"ξ",omicron:"ο",pi:"π",rho:"ρ",sigma:"σ",
tau:"τ",upsilon:"υ",phi:"φ",varkappa:"ϰ",chi:"χ",psi:"ψ",omega:"ω",digamma:"Ϝ",varepsilon:"ϵ",varrho:"ϱ",varphi:"ϕ",vartheta:"ϑ",varpi:"ϖ",varsigma:"Ϲ",aleph:"ℵ",beth:"ℶ",daleth:"ℸ",gimel:"ℷ",eth:"ð",hbar:"ℎ",hslash:"ℏ",mho:"℧",partial:"∂",wp:"℘",Game:"⅁",Bbbk:"⅌",Finv:"Ⅎ",Im:"ℑ",Re:"ℜ",complement:"∁",ell:"ℓ",circledS:"Ⓢ",imath:"ı",jmath:"ȷ",doublecap:"⋒",Cap:"⋒",doublecup:"⋓",Cup:"⋓",ast:"*",divideontimes:"⋇",rightthreetimes:"⋌",leftthreetimes:"⋋",cdot:"·",odot:"⊙",dotplus:"∔",rtimes:"⋊",ltimes:"⋉",
centerdot:"▪",doublebarwedge:"⌭",setminus:"⒁",amalg:"∐",circ:"◦",bigcirc:"◯",gtrdot:"⋗",lessdot:"⋖",smallsetminus:"⒅",circledast:"⊛",circledcirc:"⊚",sqcap:"⊓",sqcup:"⊔",barwedge:"⊼",circleddash:"⊝",star:"⋆",bigtriangledown:"▽",bigtriangleup:"△",cup:"∪",cap:"∩",times:"×",mp:"∓",pm:"±",triangleleft:"⊲",triangleright:"⊳",boxdot:"⊡",curlyvee:"⋏",curlywedge:"⋎",boxminus:"⊟",boxtimes:"⊠",ominus:"⊖",oplus:"⊕",oslash:"⊘",otimes:"⊗",uplus:"⊎",boxplus:"⊞",dagger:"†",ddagger:"‡",vee:"∨",lor:"∨",veebar:"⊻",bullet:"•",
diamond:"⋄",wedge:"∧",land:"∧",div:"÷",wr:"≀",geqq:"≧",lll:"⋘",llless:"⋘",ggg:"⋙",gggtr:"⋙",preccurlyeq:"≼",geqslant:"⩾",lnapprox:"⪉",preceq:"⪯",gg:"≫",lneq:"⪇",precnapprox:"⪹",approx:"≈",lneqq:"≨",precneqq:"⪵",approxeq:"≊",gnapprox:"⪊",lnsim:"⋦",precnsim:"⋨",asymp:"≍",gneq:"⪈",lvertneqq:"⌮",precsim:"≾",backsim:"∽",gneqq:"≩",ncong:"≇",risingdotseq:"≓",backsimeq:"⋍",gnsim:"⋧",sim:"∼",simeq:"≃",bumpeq:"≏",gtrapprox:"⪆",ngeq:"≱",Bumpeq:"≎",gtreqless:"⋛",ngeqq:"⌱",succ:"≻",circeq:"≗",gtreqqless:"⪌",ngeqslant:"⌳",
succapprox:"⪸",cong:"≅",gtrless:"≷",ngtr:"≯",succcurlyeq:"≽",curlyeqprec:"⋞",gtrsim:"≳",nleq:"≰",succeq:"⪰",curlyeqsucc:"⋟",gvertneqq:"⌯",neq:"≠",ne:"≠",nequiv:"≢",nleqq:"⌰",succnapprox:"⪺",doteq:"≐",leq:"≤",le:"≤",nleqslant:"⌲",succneqq:"⪶",doteqdot:"≑",Doteq:"≑",leqq:"≦",nless:"≮",succnsim:"⋩",leqslant:"⩽",nprec:"⊀",succsim:"≿",eqsim:"≂",lessapprox:"⪅",npreceq:"⋠",eqslantgtr:"⪖",lesseqgtr:"⋚",nsim:"≁",eqslantless:"⪕",lesseqqgtr:"⪋",nsucc:"⊁",triangleq:"≜",eqcirc:"≖",equiv:"≡",lessgtr:"≶",nsucceq:"⋡",
fallingdotseq:"≒",lesssim:"≲",prec:"≺",geq:"≥",ge:"≥",ll:"≪",precapprox:"⪷",uparrow:"↑",downarrow:"↓",updownarrow:"↕",Uparrow:"⇑",Downarrow:"⇓",Updownarrow:"⇕",circlearrowleft:"↺",circlearrowright:"↻",curvearrowleft:"↶",curvearrowright:"↷",downdownarrows:"⇊",downharpoonleft:"⇃",downharpoonright:"⇂",leftarrow:"←",gets:"←",Leftarrow:"⇐",leftarrowtail:"↢",leftharpoondown:"↽",leftharpoonup:"↼",leftleftarrows:"⇇",leftrightarrow:"↔",Leftrightarrow:"⇔",leftrightarrows:"⇄",leftrightharpoons:"⇋",leftrightsquigarrow:"↭",
Lleftarrow:"⇚",looparrowleft:"↫",looparrowright:"↬",multimap:"⊸",nLeftarrow:"⇍",nRightarrow:"⇏",nLeftrightarrow:"⇎",nearrow:"↗",nleftarrow:"↚",nleftrightarrow:"↮",nrightarrow:"↛",nwarrow:"↖",rightarrow:"→",to:"→",Rightarrow:"⇒",rightarrowtail:"↣",rightharpoondown:"⇁",rightharpoonup:"⇀",rightleftarrows:"⇆",rightleftharpoons:"⇌",rightrightarrows:"⇉",rightsquigarrow:"⇝",Rrightarrow:"⇛",searrow:"↘",swarrow:"↙",twoheadleftarrow:"↞",twoheadrightarrow:"↠",upharpoonleft:"↿",upharpoonright:"↾",restriction:"↾",
upuparrows:"⇈",Lsh:"↰",Rsh:"↱",longleftarrow:"⟵",longrightarrow:"⟶",Longleftarrow:"⟸",Longrightarrow:"⟹",implies:"⟹",longleftrightarrow:"⟷",Longleftrightarrow:"⟺",backepsilon:"∍",because:"∵",therefore:"∴",between:"≬",blacktriangleleft:"◀",blacktriangleright:"▸",dashv:"⊣",bowtie:"⋈",frown:"⌢","in":"∈",notin:"∉",mid:"∣",parallel:"∥",models:"⊨",ni:"∋",owns:"∋",nmid:"∤",nparallel:"∦",nshortmid:"⏒",nshortparallel:"⏓",nsubseteq:"⊈",nsubseteqq:"⫇",nsupseteq:"⊉",nsupseteqq:"⫈",ntriangleleft:"⋪",ntrianglelefteq:"⋬",
ntriangleright:"⋫",ntrianglerighteq:"⋭",nvdash:"⊬",nVdash:"⊮",nvDash:"⊭",nVDash:"⊯",pitchfork:"⋔",propto:"∝",shortmid:"⏐",shortparallel:"⏑",smile:"⌣",sqsubset:"⊏",sqsubseteq:"⊑",sqsupset:"⊐",sqsupseteq:"⊒",subset:"⊂",Subset:"⋐",subseteq:"⊆",subseteqq:"⫅",subsetneq:"⊊",subsetneqq:"⫋",supset:"⊃",Supset:"⋑",supseteq:"⊇",supseteqq:"⫆",supsetneq:"⊋",supsetneqq:"⫌",trianglelefteq:"⊴",trianglerighteq:"⊵",varpropto:"⫉",varsubsetneq:"⏔",varsubsetneqq:"⏖",varsupsetneq:"⏕",varsupsetneqq:"⏗",vdash:"⊢",Vdash:"⊩",
vDash:"⊨",Vvdash:"⊪",vert:"|",Vert:"ǁ","|":"ǁ","{":"{","}":"}",backslash:"\\",langle:"〈",rangle:"〉",lceil:"⌈",rceil:"⌉",lbrace:"{",rbrace:"}",lfloor:"⌊",rfloor:"⌋",cdots:"⋯",ddots:"⋰",vdots:"⋮",dots:"…",ldots:"…","#":"#",bot:"⊥",perp:"⊥",angle:"∠",backprime:"‵",bigstar:"★",blacklozenge:"◆",blacksquare:"■",blacktriangle:"▲",blacktriangledown:"▼",clubsuit:"♣",diagdown:"⒁",diagup:"⒂",diamondsuit:"♢",emptyset:"ø",exists:"∃",flat:"♭",forall:"∀",heartsuit:"♡",infty:"∞",lozenge:"◇",measuredangle:"∡",nabla:"∇",
natural:"♮",neg:"¬",lnot:"¬",nexists:"∄",prime:"′",sharp:"♯",spadesuit:"♠",sphericalangle:"∢",surd:"√",top:"⊤",varnothing:"∅",triangle:"△",triangledown:"▽"}}}},41:{value:function(){return{meta:{fontFamily:"KF AMS ROMAN",src:"KF_AMS_ROMAN.woff"}}}},42:{value:function(){function k(){var a=0;d.Utils.each(this.expressions,function(b){var c=null;b&&(b.setMatrix(new d.Matrix(1,0,0,1,0,0)),c=b.getFixRenderBox(),b.translate(0-c.x,a),a+=c.height+e)});return this}function l(a){var b=0;if(a){if(a.getType()===
f.EXP)for(var c=0,b=a.getChildren().length;c<b;c++)l(a.getChild(c));else if(a.getType()===f.COMPOUND_EXP){c=0;for(b=a.getOperands().length;c<b;c++)l(a.getOperand(c));l(a.getOperator())}a.addedCall&&a.addedCall()}}var d=j.r(45),f=j.r(6),g=j.r(35),h=j.r(34),a={fontsize:50,autoresize:!0,padding:[0]},b=j.r(1),e=10,c=d.createClass("ExpressionWrap",{constructor:function(a,b){this.wrap=new d.Group;this.bg=(new d.Rect(0,0,0,0)).fill("transparent");this.exp=a;this.config=b;this.wrap.setAttr("data-type","kf-exp-wrap");
this.bg.setAttr("data-type","kf-exp-wrap-bg");this.wrap.addShape(this.bg);this.wrap.addShape(this.exp)},getWrapShape:function(){return this.wrap},getExpression:function(){return this.exp},getBackground:function(){return this.bg},resize:function(){var a=this.config.padding,b=this.exp.getFixRenderBox();1===a.length&&(a[1]=a[0]);this.bg.setSize(2*a[1]+b.width,2*a[0]+b.height);this.exp.translate(a[1],a[0])}}),n=d.createClass("Formula",{base:j.r(43),constructor:function(b,c){this.callBase(b);this.expressions=
[];this.fontInstaller=new h(this);this.config=d.Utils.extend({},a,c);this.initEnvironment();this.initInnerFont()},getContentContainer:function(){return this.container},initEnvironment:function(){this.zoom=this.config.fontsize/50;"width"in this.config&&this.setWidth(this.config.width);"height"in this.config&&this.setHeight(this.config.height);this.node.setAttribute("font-size",a.fontsize)},initInnerFont:function(){var a=g.getFontList(),b=this;d.Utils.each(a,function(a){var c=b.doc.createElement("style");
c.setAttribute("type","text/css");c.innerHTML='@font-face{font-family: "${fontFamily}";font-style: normal;src: url("${src}") format("woff");}'.replace("${fontFamily}",a.meta.fontFamily).replace("${src}",a.meta.src);b.resourceNode.appendChild(c)})},insertExpression:function(a,b){var c=this.wrap(a);this.container.clearTransform();this.expressions.splice(b,0,c.getWrapShape());this.addShape(c.getWrapShape());l.call(this,c.getExpression());c.resize();k.call(this);this.resetZoom();this.config.autoresize&&
this.resize()},appendExpression:function(a){this.insertExpression(a,this.expressions.length)},resize:function(){var a=this.container.getRenderBox("paper");this.node.setAttribute("width",a.width);this.node.setAttribute("height",a.height)},resetZoom:function(){var a=this.zoom/this.getBaseZoom();0!==a&&this.container.scale(a)},wrap:function(a){return new c(a,this.config)},clear:function(){this.callBase();this.expressions=[]},clearExpressions:function(){d.Utils.each(this.expressions,function(a){a.remove()});
this.expressions=[]},toJPG:function(a){(new b(this)).toJPG(a)},toPNG:function(a){(new b(this)).toPNG(a)}});d.Utils.extend(n,{registerFont:function(a){g.registerFont(a)}});return n}},43:{value:function(){var k=j.r(45);return k.createClass("FPaper",{base:k.Paper,constructor:function(l){this.callBase(l);this.doc=l.ownerDocument;this.container=new k.Group;this.container.setAttr("data-type","kf-container");this.background=new k.Group;this.background.setAttr("data-type","kf-bg");this.zoom=this.baseZoom=
1;this.base("addShape",this.background);this.base("addShape",this.container)},getZoom:function(){return this.zoom},getBaseZoom:function(){return this.baseZoom},addShape:function(k,d){return this.container.addShape(k,d)},getBackground:function(){return this.background},removeShape:function(k){return this.container.removeShape(k)},clear:function(){return this.container.clear()}})}},44:{value:function(){if(!window.jQuery)throw Error("Missing jQuery");return window.jQuery}},45:{value:function(){if(!window.kity)throw Error("Missing Kity Graphic Lib");
return window.kity}},46:{value:function(){var k=j.r(45),l={"{":"M2.592,33.627c5.04,0.864,8.353,4.176,8.353,10.225v11.665c0,6.553,1.584,9.721,7.417,9.721v1.872   c-8.641,0-11.881-3.457-11.881-11.593V42.556c0-4.824-2.376-6.913-6.48-8.064v-1.873c4.104-1.224,6.48-3.312,6.48-8.137V11.665   C6.48,3.457,9.721,0,18.361,0v1.944c-5.833,0-7.417,3.168-7.417,9.792v11.521c0,5.977-3.313,9.361-8.353,10.153V33.627z","}":"M11.809,55.517c0,8.137-3.24,11.593-11.809,11.593v-1.872c5.761,0,7.345-3.168,7.345-9.721V43.852   c0-6.049,3.24-9.361,8.353-10.225v-0.216c-5.112-0.792-8.353-4.177-8.353-10.153V11.737c0-6.625-1.584-9.792-7.345-9.792V0   c8.569,0,11.809,3.457,11.809,11.665v12.817c0,4.825,2.448,6.913,6.553,8.137v1.873c-4.104,1.152-6.553,3.24-6.553,8.064V55.517z",
"[":"M11.305,67.11H0V0h11.305v1.944H4.392v63.293h6.913V67.11z","]":"M0,67.11v-1.872h6.984V1.944H0V0h11.305v67.11H0z","(":"M14.041,71.358C8.641,67.542,0,57.245,0,35.571c0-8.569,1.152-17.138,5.112-24.77C7.272,6.337,10.009,3.168,13.969,0   l1.152,1.512C9.505,6.985,4.752,17.282,4.752,35.571C4.824,54.005,9.505,64.23,15.121,69.846L14.041,71.358z",")":"M1.224,0c3.888,3.168,6.625,6.337,8.785,10.729c3.672,7.129,5.113,15.266,5.113,24.771c0,8.568-1.152,17.354-5.185,25.13   c-2.16,4.249-5.185,8.137-8.785,10.729L0,69.846c5.617-5.616,10.297-15.841,10.369-34.275C10.369,17.282,5.617,6.985,0,1.512   L1.224,0",
"|":"M-1.656,74.958V0h3.313v74.958H-1.656z","\\langle\\":"M2.952,36.003l12.745,33.411c0.36,0.792,0.36,0.936,0.36,1.152c0,0.792-0.648,1.44-1.44,1.44   c-1.008,0-1.368-0.936-1.656-1.728L0.36,37.228C0,36.363,0,36.219,0,36.003c0-0.432,0.216-0.864,0.36-1.296L12.961,1.656   C13.465,0.36,13.969,0,14.617,0c0.792,0,1.44,0.648,1.44,1.44c0,0.36,0,0.504-0.36,1.296L2.952,36.003z","\\rangle\\":"M2.952,70.566c-0.288,0.72-0.576,1.44-1.512,1.44c-0.792,0-1.44-0.648-1.44-1.44c0-0.36,0-0.504,0.36-1.296l12.745-33.267   L0.36,2.592C0,1.8,0,1.656,0,1.44C0,0.648,0.648,0,1.44,0s1.224,0.432,1.656,1.656l12.601,33.123c0.36,0.864,0.36,1.008,0.36,1.224   c0,0.216,0,0.36-0.36,1.224L2.952,70.566z",
"\\lfloor\\":"M2.592,72.006C0.288,72.006,0,71.718,0,69.414V2.592C0,1.512,0,0,1.439,0c1.44,0,1.44,1.296,1.44,2.592v66.534h12.385   c1.08,0,2.593,0,2.593,1.44c0,1.44-1.513,1.44-2.593,1.44H2.592z","\\rfloor\\":"M17.858,69.414c0,2.376-0.217,2.592-2.521,2.592H2.593c-1.08,0-2.593,0-2.593-1.44c0-1.44,1.513-1.44,2.593-1.44h12.385   V2.592c0-1.08,0-2.592,1.44-2.592s1.44,1.296,1.44,2.592V69.414z","\\lceil\\":"M2.88,2.88v66.534c0,1.296,0,2.592-1.44,2.592C0,72.006,0,70.494,0,69.414V2.592C0,0.288,0.288,0,2.592,0h12.673   c1.08,0,2.593,0,2.593,1.44c0,1.44-1.513,1.44-2.593,1.44H2.88z",
"\\rceil\\":"M17.858,69.414c0,1.296,0,2.592-1.44,2.592s-1.44-1.512-1.44-2.592V2.88H2.593C1.513,2.88,0,2.88,0,1.44   C0,0,1.513,0,2.593,0h12.745c2.304,0,2.521,0.216,2.521,2.592V69.414z"};return k.createClass("BracketsOperator",{base:j.r(55),constructor:function(){this.callBase("Brackets")},applyOperand:function(d){var f=this.getParentExpression().getLeftSymbol(),g=this.getParentExpression().getRightSymbol(),h=d.getFixRenderBox(),a=new k.Group,b=null,e=b=null,e=null,c=5,e=0;this.addOperatorShape(a);
"."!==f&&(b=(new k.Path(l[f])).fill("black"),a.addShape(b),e=b.getFixRenderBox(),e=h.height/e.height,b.scale(1<e?1:e,e),e=b.getFixRenderBox(),c+=e.width,c=Math.floor(c));d.translate(c,0);c+=h.width+5;c=Math.floor(c);"."!==g&&(b=(new k.Path(l[g])).fill("black"),a.addShape(b),e=b.getFixRenderBox(),e=h.height/e.height,b.scale(1<e?1:e,e),b.translate(c,0))}})}},47:{value:function(){var k=j.r(45);return k.createClass("CasesOperator",{base:j.r(55),constructor:function(){this.callBase("Cases")},applyOperand:function(){for(var k=
arguments,d=0,f=0,g=null,h=0,a=k.length;h<a;h++)g=k[h].getFixRenderBox(),d=Math.max(d,g.width),k[h].translate(0,f),f+=g.height;d=this.getOperatorShape(f);f=(d.height-f)/2;f=Math.max(f,0);h=0;for(a=k.length;h<a;h++)k[h].translate(d.width,f);this.parentExpression.expand(20,20);this.parentExpression.translateElement(10,10)},getOperatorShape:function(j){var d=new k.Group,f=[(new k.Path("M4.825,23.839V9.577c0-2.88,1.872-7.489,9.721-7.993c0.36-0.072,0.648-0.36,0.648-0.792C15.193,0,14.617,0,13.825,0   C6.625,0,0.072,3.672,0,9.001v14.838H4.825z")).fill("black"),
(new k.Path("M10.153,18.365c0.178,0.655,0.209,0.871,0.215,2.39h4.824c-0.007-3.266-0.589-4.493-2.879-6.783   c-1.512-1.512-3.601-2.232-5.617-2.808c5.905-1.656,8.497-4.969,8.497-9.145V0h-4.825v0.579c0,2.808,0,5.112-2.88,7.489   c-2.52,2.088-5.256,2.232-6.84,2.304C0.288,10.444,0,10.732,0,11.164c0,0.72,0.432,0.72,1.152,0.792   C5.904,12.244,9.361,14.836,10.153,18.365z")).fill("black"),(new k.Path("M14.042,23.828c-4.537-0.288-8.065-2.592-9.001-6.265c-0.216-0.648-0.216-0.792-0.216-3.384V0H0v14.395   c0,3.024,0,5.329,3.457,8.065c2.808,2.16,7.561,2.952,10.369,2.952c0.792,0,1.368,0,1.368-0.792   C15.193,23.9,14.761,23.9,14.042,23.828z")).fill("black"),
(new k.Rect(4.8,0)).fill("black"),(new k.Rect(4.8,0)).fill("black")],g=[],h=0,a=0;this.addOperatorShape(d);for(a=0;5>a;a++)d.addShape(f[a]),g[a]=f[a].getFixRenderBox();a=g[0].height+g[1].height+g[2].height;a>=j?(f[0].translate(g[1].width-4.8,0),f[1].translate(0,g[0].height),f[2].translate(g[1].width-4.8,g[0].height+g[1].height),f[3].remove(),f[4].remove()):(j=(j-a)/2,f[3].setHeight(j),f[4].setHeight(j),f[0].translate(g[1].width-4.8,h),h+=g[0].height,f[3].translate(g[1].width-4.8,h),h+=j,f[1].translate(0,
h),h+=g[1].height,f[4].translate(g[1].width-4.8,h),f[2].translate(g[1].width-4.8,h+j));return d.getFixRenderBox()}})}},48:{value:function(){var k=j.r(45);return k.createClass("CombinationOperator",{base:j.r(55),constructor:function(){this.callBase("Combination")},applyOperand:function(){var j=0,d=arguments,f=0,g=0,h=0,a=[],b=[];k.Utils.each(d,function(d){var c=d.getFixRenderBox(),d=d.getOffset();c.height-=d.top+d.bottom;a.push(c);b.push(d);g=Math.max(d.top,g);h=Math.max(d.bottom,h);f=Math.max(c.height,
f)});k.Utils.each(d,function(d,c){var g=a[c];d.translate(j-g.x,(f-(g.y+g.height))/2+h-b[c].bottom);j+=g.width});this.parentExpression.setOffset(g,h);this.parentExpression.updateBoxSize()}})}},49:{value:function(){var k=j.r(45),l=j.r(30),d={subOffset:0,supOffset:0,zoom:0.66};return k.createClass("ScriptController",{constructor:function(f,g,h,a,b){this.observer=f.getParentExpression();this.target=g;this.sup=h;this.sub=a;this.options=k.Utils.extend({},d,b)},applyUpDown:function(){var d=this.target,g=
this.sup,h=this.sub,a=this.options;g.scale(a.zoom);h.scale(a.zoom);a=d.getFixRenderBox();return l.isEmpty(g)&&l.isEmpty(h)?{width:a.width,height:a.height,top:0,bottom:0}:!l.isEmpty(g)&&l.isEmpty(h)?this.applyUp(d,g):l.isEmpty(g)&&!l.isEmpty(h)?this.applyDown(d,h):this.applyUpDownScript(d,g,h)},applySide:function(){var d=this.target,g=this.sup,h=this.sub;return l.isEmpty(g)&&l.isEmpty(h)?(d=d.getRenderBox(this.observer),{width:d.width,height:d.height,top:0,bottom:0}):l.isEmpty(g)&&!l.isEmpty(h)?this.applySideSub(d,
h):!l.isEmpty(g)&&l.isEmpty(h)?this.applySideSuper(d,g):this.applySideScript(d,g,h)},applySideSuper:function(d,g){g.scale(this.options.zoom);var h=d.getRenderBox(this.observer),a=g.getRenderBox(this.observer),b=d.getMeanline(this.observer),b=g.getBaseline(this.observer)-b,a={top:0,bottom:0,width:h.width+a.width,height:h.height};g.translate(h.width,0);this.options.supOffset&&g.translate(this.options.supOffset,0);0<b?(d.translate(0,b),a.bottom=b,a.height+=b):g.translate(0,-b);return a},applySideSub:function(d,
g){g.scale(this.options.zoom);var h=d.getRenderBox(this.observer),a=g.getRenderBox(this.observer),b=g.getOffset(),e=d.getBaseline(this.observer),c=(a.height+b.top+b.bottom)/2,k=h.height-e-c,a={top:0,bottom:0,width:h.width+a.width,height:h.height};g.translate(h.width,b.top+e-c);this.options.subOffset&&g.translate(this.options.subOffset,0);0>k&&(a.top=-k,a.height-=k);return a},applySideScript:function(d,g,h){g.scale(this.options.zoom);h.scale(this.options.zoom);var a=d.getRenderBox(this.observer),b=
h.getRenderBox(this.observer),e=g.getRenderBox(this.observer),c=d.getMeanline(this.observer),k=d.getBaseline(this.observer),j=g.getBaseline(this.observer),l=h.getAscenderline(this.observer),k=c+2*(k-c)/3,c=c-j,j=a.height-k-(b.height-l),b={top:0,bottom:0,width:a.width+Math.max(b.width,e.width),height:a.height};g.translate(a.width,c);h.translate(a.width,k-l);this.options.supOffset&&g.translate(this.options.supOffset,0);this.options.subOffset&&h.translate(this.options.subOffset,0);0<c?0>j&&(a.height-=
j,b.top=-j):(d.translate(0,-c),g.translate(0,-c),h.translate(0,-c),b.height-=c,0<j?b.bottom=-c:(b.height-=j,c=-c,j=-j,c>j?b.bottom=c-j:b.top=j-c));return b},applyUp:function(d,g){var h=g.getFixRenderBox(),a=d.getFixRenderBox(),b={width:Math.max(a.width,h.width),height:h.height+a.height,top:0,bottom:h.height};g.translate((b.width-h.width)/2,0);d.translate((b.width-a.width)/2,h.height);return b},applyDown:function(d,g){var h=g.getFixRenderBox(),a=d.getFixRenderBox(),b={width:Math.max(a.width,h.width),
height:h.height+a.height,top:h.height,bottom:0};g.translate((b.width-h.width)/2,a.height);d.translate((b.width-a.width)/2,0);return b},applyUpDownScript:function(d,g,h){var a=g.getFixRenderBox(),b=h.getFixRenderBox(),e=d.getFixRenderBox(),c={width:Math.max(e.width,a.width,b.width),height:a.height+b.height+e.height,top:0,bottom:0};g.translate((c.width-a.width)/2,0);d.translate((c.width-e.width)/2,a.height);h.translate((c.width-b.width)/2,a.height+e.height);return c}})}},50:{value:function(){var k=
j.r(45),l=j.r(68).zoom;return k.createClass("FractionOperator",{base:j.r(55),constructor:function(){this.zoom=l;this.callBase("Fraction")},setZoom:function(d){this.zoom=d},applyOperand:function(d,f){d.scale(this.zoom);f.scale(this.zoom);var g=Math.ceil(d.getWidth()),h=Math.ceil(f.getWidth()),a=Math.ceil(d.getHeight()),b=Math.ceil(f.getHeight()),e=Math.max(g,h),c=Math.max(a,b),j=(new k.Rect(e+6,1)).fill("black");this.addOperatorShape(j);d.translate((e-g)/2+3,0);j.translate(0,a+1);f.translate((e-h)/
2+3,a+j.getHeight()+2);this.parentExpression.setOffset(c-a,c-b);this.parentExpression.expand(2,2);this.parentExpression.translateElement(1,1)}})}},51:{value:function(){function k(){var f=new d(this.funcName,"KF AMS ROMAN");this.addOperatorShape(f);f.getBaseline=function(){return f.getFixRenderBox().height};f.getMeanline=function(){return 0};return f}var l=j.r(45),d=j.r(5),f=j.r(49);return l.createClass("FunctionOperator",{base:j.r(55),constructor:function(d){this.callBase("Function: "+d);this.funcName=
d},applyOperand:function(d,h,a){var b=k.call(this),e=d.getFixRenderBox(),c=this.parentExpression.isSideScript()?"applySide":"applyUpDown",c=(new f(this,b,h,a,{zoom:0.5}))[c](),e=(c.height+c.top+c.bottom-e.height)/2;b.translate(0,c.top);h.translate(0,c.top);a.translate(0,c.top);0<=e?d.translate(c.width+5,e):(e=-e,b.translate(0,e),h.translate(0,e),a.translate(0,e),d.translate(c.width+5,0));this.parentExpression.expand(5,10);this.parentExpression.translateElement(5,5)}})}},52:{value:function(){var k=
j.r(45),l=["M27.938,7.681l-0.576,1.2L13.969,2.976L0.576,8.88L0,7.632L13.969,0L27.938,7.681z","M49.684,8.305L49.3,9.553L24.866,2.976L0.384,9.553L0,8.305L24.866,0L49.684,8.305z","M35.763,2.976L0.288,9.601L0,8.256L35.763,0l34.995,8.113c0.672,0.144,0.72,0.192,0.72,0.288c0,0.192-0.192,0.96-0.24,1.2   L35.763,2.976z"];return k.createClass("HatOperator",{base:j.r(55),constructor:function(){this.callBase("Hat")},setType:function(d){this.opType=d},applyOperand:function(d){var f=d.getFixRenderBox(),g=this.getOperatorShape(f.width),
h=null,h=g.getFixRenderBox();g.translate((f.width-h.width)/2,0);d.translate(0,h.height);this.parentExpression.expand(3,6);this.parentExpression.translateElement(3,3)},getOperatorShape:function(d){var f=null,g=null;switch(this.opType){case "vec":f="M15.103,0.896c0.128,0.896,0.512,1.664,0.96,2.432c0.704,1.024,1.664,1.856,2.816,2.304   c0.448,0.192,0.704,0.448,0.704,0.896c0,0.512-0.256,0.768-0.704,0.96C17.727,8,16.767,8.768,16.063,9.855   c-0.448,0.704-0.832,1.536-0.96,2.368c-0.128,0.768-0.512,0.896-1.344,0.896c-0.576,0-1.024-0.256-1.024-1.024   c0-0.704,0.704-2.88,1.984-4.352H0.96C0.448,7.744,0,6.976,0,6.527C0,6.08,0.448,5.375,0.96,5.375h13.759   c-1.28-1.408-1.984-3.647-1.984-4.352S13.183,0,13.759,0C14.591,0,14.975,0.192,15.103,0.896z";
break;case "hat":f="M12.817,6.529l-0.864,0.864L6.433,2.496L0.864,7.393L0,6.529L6.433,0L12.817,6.529z";break;case "widehat":f=50>d?l[0]:100>d?l[1]:l[2];break;case "overrightarrow":return this.getOverrightarrow(d)}g=(new k.Path(f)).fill("black");this.addOperatorShape(g);return g},getOverrightarrow:function(d){var f=new k.Group,g=(new k.Path("M15.103,0.896c0.128,0.896,0.512,1.664,0.96,2.432c0.704,1.024,1.664,1.856,2.816,2.304   c0.448,0.192,0.704,0.448,0.704,0.896c0,0.512-0.256,0.768-0.704,0.96C17.727,8,16.767,8.768,16.063,9.855   c-0.448,0.704-0.832,1.536-0.96,2.368c-0.128,0.768-0.512,0.896-1.344,0.896c-0.576,0-1.024-0.256-1.024-1.024   c0-0.704,0.704-2.88,1.984-4.352H0.96C0.448,7.744,0,6.976,0,6.527C0,6.08,0.448,5.375,0.96,5.375h13.759   c-1.28-1.408-1.984-3.647-1.984-4.352S13.183,0,13.759,0C14.591,0,14.975,0.192,15.103,0.896z")).fill("black"),
h=(new k.Rect(0,2.4)).fill("black"),a=null;f.addShape(g);f.addShape(h);this.addOperatorShape(f);a=g.getFixRenderBox();d-=a.width;d+=2;0<d&&(h.setWidth(d),g.translate(d-2,0),h.translate(0,(a.height-2.4)/2));return f}})}},53:{value:function(){var k=j.r(45),l=j.r(49);return k.createClass("IntegrationOperator",{base:j.r(55),constructor:function(d){this.callBase("Integration");this.opType=d||1},setType:function(d){this.opType=d|0},resetType:function(){this.opType=1},applyOperand:function(d,f,g){var h=
this.getOperatorShape(),a=d.getFixRenderBox(),b=(new l(this,h,f,g,{supOffset:3,subOffset:-15})).applySide(),a=(b.height+b.top-a.height)/2;h.translate(0,b.top);f.translate(0,b.top);g.translate(0,b.top);0<=a?d.translate(b.width+3,a):(a=-a,h.translate(0,a),f.translate(0,a),g.translate(0,a),d.translate(b.width+3,0));this.parentExpression.expand(3,6);this.parentExpression.translateElement(3,3)},getOperatorShape:function(){var d=new k.Group,f=new k.Group,g=(new k.Path("M1.318,48.226c0,0,0.044,0.066,0.134,0.134c0.292,0.313,0.626,0.447,1.006,0.447c0.246,0.022,0.358-0.044,0.604-0.268   c0.782-0.782,1.497-2.838,2.324-6.727c0.514-2.369,0.938-4.693,1.586-8.448C8.559,24.068,9.9,17.878,11.978,9.52   c0.917-3.553,1.922-7.576,3.866-8.983C16.247,0.246,16.739,0,17.274,0c1.564,0,2.503,1.162,2.592,2.57   c0,0.827-0.424,1.386-1.273,1.386c-0.671,0-1.229-0.514-1.229-1.251c0-0.805,0.514-1.095,1.185-1.274   c0.022,0-0.291-0.29-0.425-0.379c-0.201-0.134-0.514-0.224-0.737-0.224c-0.067,0-0.112,0-0.157,0.022   c-0.469,0.134-0.983,0.939-1.453,2.234c-0.537,1.475-0.961,3.174-1.631,6.548c-0.424,2.101-0.693,3.464-1.229,6.727   c-1.608,9.185-2.949,15.487-5.006,23.756c-0.514,2.034-0.849,3.24-1.207,4.335c-0.559,1.698-1.162,2.95-1.811,3.799   c-0.514,0.715-1.385,1.408-2.436,1.408c-1.363,0-2.391-1.185-2.458-2.592c0-0.804,0.447-1.363,1.273-1.363   c0.671,0,1.229,0.514,1.229,1.251C2.503,47.757,1.989,48.047,1.318,48.226z")).fill("black"),
h=(new k.Rect(0,0,0,0)).fill("transparent"),a=null;f.addShape(g);d.addShape(h);d.addShape(f);this.addOperatorShape(d);for(h=1;h<this.opType;h++)a=(new k.Use(g)).translate(g.getWidth()/2*h,0),f.addShape(a);f.scale(1.6);a=null;d.getBaseline=function(){return f.getFixRenderBox().height};d.getMeanline=function(){return 10};return d}})}},54:{value:function(){var k=j.r(45),l="M14.041,71.358C8.641,67.542,0,57.245,0,35.571c0-8.569,1.152-17.138,5.112-24.77C7.272,6.337,10.009,3.168,13.969,0   l1.152,1.512C9.505,6.985,4.752,17.282,4.752,35.571C4.824,54.005,9.505,64.23,15.121,69.846L14.041,71.358z;M1.224,0c3.888,3.168,6.625,6.337,8.785,10.729c3.672,7.129,5.113,15.266,5.113,24.771c0,8.568-1.152,17.354-5.185,25.13   c-2.16,4.249-5.185,8.137-8.785,10.729L0,69.846c5.617-5.616,10.297-15.841,10.369-34.275C10.369,17.282,5.617,6.985,0,1.512   L1.224,0;M3.17,36.167c0-0.056-0.002-0.109-0.002-0.165c0-22.466,8.713-31.611,12.241-35.211c0-0.072,0.145-0.216,0.145-0.432   c0-0.216-0.216-0.36-0.504-0.36C14.257,0,8.137,5.329,4.608,13.249C1.008,21.242,0,29.019,0,35.931   c0,0.076,0.001,0.159,0.001,0.236H3.17z;M3.17,0H0c0.087,5.279,0.817,13.432,4.813,22.021c3.457,7.489,9.361,12.745,10.226,12.745c0.359,0,0.504-0.144,0.504-0.432   c0-0.072,0-0.216-0.216-0.432C12.072,30.578,3.473,21.615,3.17,0z;M12.384,36.167c0-0.056,0.002-0.109,0.002-0.165c0-22.466-8.713-31.611-12.241-35.211C0.145,0.72,0,0.576,0,0.36   C0,0.144,0.216,0,0.504,0c0.793,0,6.913,5.329,10.441,13.249c3.601,7.993,4.608,15.77,4.608,22.682   c0,0.076-0.001,0.159-0.001,0.236H12.384z;M12.372,0h3.17c-0.087,5.279-0.817,13.432-4.813,22.021C7.272,29.51,1.368,34.767,0.504,34.767   C0.145,34.767,0,34.623,0,34.334c0-0.072,0-0.216,0.216-0.432C3.47,30.578,12.069,21.615,12.372,0z".split(";");
return k.createClass("MatrixOperator",{base:j.r(55),constructor:function(){this.callBase("Matrix")},applyOperand:function(){for(var d=[].slice.call(arguments),f=this.parentExpression,g=f.getColNum(),h=f.mtype,a=this.getBoxs(d),b=[],e=[],c=0,k=0,j=d.length/g;k<j;k++){for(var l=c=0,I=g;l<I;l++)c=Math.max(c,a[k*g+l].height),e[l]=Math.max(e[l]||0,a[k*g+l].width);b[k]=c}this.relocation(d,a,e,b,g);h&&this.generateOpShape(h,d);f.expand(5,10);f.translateElement(5,5)},relocation:function(d,f,g,h,a){for(var b=
0,e=0,c=0,k=0,j=d.length/a;k<j;k++){for(var l=e=0,I=a;l<I;l++)c=k*a+l,d[c].translate(e+(g[l]-f[c].width)/2,b+(h[k]-f[c].height)/2),e+=g[l]+5;b+=h[k]+5}},generateOpShape:function(d,f){var g=this.parentExpression.getFixRenderBox(),h=0,a=null;switch(d){case "p":a=this.createPShape(g,f);break;case "v":a=this.createVShape(g)}for(var h=h+(a[0].getFixRenderBox().width+5),b=0,e=f.length;b<e;b++)f[b].translate(h,0);h+=g.width+5;a[1].translate(h,0)},getBoxs:function(d){for(var f=[],g=0,h=d.length;g<h;g++)f[g]=
d[g].getFixRenderBox();return f},createPShape:function(d,f){var g=null,h=new k.Group,a=null,b=0,e=0,c=a=b=null,j=null,b=e=0,m=null,R=null,I=null;this.addOperatorShape(h);g=new k.Group;I=new k.Group;h.addShape(g);h.addShape(I);b=(new k.Path(l[2])).fill("black");c=(new k.Path(l[3])).fill("black");a=(new k.Path(l[4])).fill("black");j=(new k.Path(l[5])).fill("black");g.addShape(b);g.addShape(c);I.addShape(a);I.addShape(j);a=b.getFixRenderBox();e=a.height;b=c.getFixRenderBox().height;b=d.height-e-b;if(0<
b)m=(new k.Rect(3,b)).fill("black"),R=(new k.Rect(3,b)).fill("black"),g.addShape(m),I.addShape(R),m.translate(0,e),R.translate(a.width-3,e),e+=b,c.translate(0,e),j.translate(0,e);else{c.translate(0,e);j.translate(0,e);b=-b/2;h=0;for(c=f.length;h<c;h++)f[h].translate(0,b)}return[g,I]},createVShape:function(d){var f=new k.Group,g=(new k.Rect(3,d.height)).fill("black"),d=(new k.Rect(3,d.height)).fill("black");f.addShape(g);f.addShape(d);this.addOperatorShape(f);return[g,d]}})}},55:{value:function(){var k=
j.r(45),l=j.r(6);return k.createClass("Operator",{base:j.r(67),constructor:function(d){this.callBase();this.type=l.OP;this.parentExpression=null;this.operatorName=d;this.operatorShape=new k.Group;this.addShape(this.operatorShape)},applyOperand:function(){throw Error("applyOperand is abstract");},setParentExpression:function(d){this.parentExpression=d},getParentExpression:function(){return this.parentExpression},clearParentExpression:function(){this.parentExpression=null},addOperatorShape:function(d){return this.operatorShape.addShape(d)},
getOperatorShape:function(){return this.operatorShape}})}},56:{value:function(){var k=j.r(45);return k.createClass("OverlineOperator",{base:j.r(55),constructor:function(){this.callBase("Overline")},applyOperand:function(k){var d=this.getOperatorShape(k.getFixRenderBox().width),f=null;this.addOperatorShape(d);f=d.getFixRenderBox();k.translate(0,f.height);this.parentExpression.expand(3,6);this.parentExpression.translateElement(3,3)},getOperatorShape:function(j){return(new k.Rect(j,3)).fill("black")}})}},
57:{value:function(){var k=j.r(45);return k.createClass("OverparenOperator",{base:j.r(55),constructor:function(){this.callBase("Overparen")},applyOperand:function(j){var d=(new k.Path("M0.527,7.805H0c0.727-1.43,1.57-2.619,2.531-3.568c1.359-1.359,2.971-2.405,4.834-3.138S11.156,0,13.148,0   c2.93,0,5.599,0.721,8.007,2.162s4.134,3.322,5.177,5.643h-0.598c-0.645-1.16-1.523-2.112-2.637-2.856s-2.522-1.301-4.228-1.67   s-3.489-0.554-5.353-0.554c-2.016,0-3.85,0.158-5.502,0.475C6.715,3.434,5.672,3.727,4.887,4.078S3.346,4.901,2.619,5.493   S1.195,6.855,0.527,7.805z")).fill("black"),
f=j.getFixRenderBox(),g=null,g=0;this.addOperatorShape(d);g=d.getFixRenderBox();g=f.width/g.width;d.scale(g,1+g/20);g=d.getFixRenderBox();j.translate(0,g.height)}})}},58:{value:function(){var k=j.r(45),l=j.r(5);return k.createClass("PmodOperator",{base:j.r(55),constructor:function(){this.callBase("Pmod")},applyOperand:function(d){var f=this.createOperatorShape(d.getFixRenderBox());d.translate(f.left,f.top);this.parentExpression.expand(5,10)},createOperatorShape:function(d){var f=(new k.Path("M10.657,48.004c-0.48,0-4.608-3.12-7.489-9.025C0.528,33.555,0,27.746,0,24.002c0-4.032,0.576-9.361,3.024-14.641   C5.857,3.264,10.177,0,10.657,0c0.288,0,0.48,0.144,0.48,0.48c0,0.144,0,0.24-0.624,0.816c-5.905,6-7.729,14.354-7.729,22.706   c0,7.345,1.536,16.417,7.537,22.466c0.816,0.816,0.816,0.912,0.816,1.056C11.137,47.86,10.945,48.004,10.657,48.004z")).fill("black"),
g=(new k.Path("M8.112,38.643C5.28,44.74,0.96,48.004,0.48,48.004c-0.288,0-0.48-0.192-0.48-0.48c0-0.144,0-0.24,0.624-0.816   c5.952-6.049,7.729-14.498,7.729-22.706c0-10.033-2.736-17.666-7.441-22.418C0,0.72,0,0.624,0,0.48C0,0.192,0.192,0,0.48,0   c0.48,0,4.608,3.12,7.488,9.024c2.641,5.425,3.168,11.233,3.168,14.978C11.137,28.034,10.561,33.363,8.112,38.643z")).fill("black"),h=new l("mod","KF AMS ROMAN"),a=new k.Group,b=0,e={};a.addShape(f);a.addShape(g);a.addShape(h);this.addOperatorShape(a);a=f.getFixRenderBox();
b=h.getFixRenderBox();e.top=0;e.left=a.width+3+b.width+10;h.translate(a.width+3,(a.height-b.height)/2);g.translate(e.left+d.width+3,0);b=d.height-a.height;0<b?(f.translate(0,b/2),g.translate(0,b/2),h.translate(0,b/2)):e.top=-b/2;return e}})}},59:{value:function(){var k=j.r(45),l=j.r(49);return k.createClass("ProductOperator",{base:j.r(55),constructor:function(){this.callBase("Product");this.displayType="equation"},applyOperand:function(d,f,g){var h=this.getOperatorShape(),a=d.getFixRenderBox(),b=
(new l(this,h,f,g)).applyUpDown(),a=(b.height-b.top-b.bottom-a.height)/2;0<=a?d.translate(b.width+0,a+b.bottom):(a=-a,h.translate(0,a),f.translate(0,a),g.translate(0,a),d.translate(b.width+0,b.bottom));this.parentExpression.setOffset(b.top,b.bottom);this.parentExpression.expand(0,0);this.parentExpression.translateElement(0,0)},getOperatorShape:function(){var d=(new k.Path("M27.842,28.898c0,1.728,0.096,2.256,3.792,2.256h1.152v1.488c-1.68-0.144-5.28-0.144-7.104-0.144s-5.376,0-7.057,0.144   v-1.488h1.152c3.696,0,3.792-0.528,3.792-2.256V1.488H9.217v27.411c0,1.728,0.096,2.256,3.792,2.256h1.152v1.488   c-1.68-0.144-5.28-0.144-7.104-0.144s-5.376,0-7.057,0.144v-1.488h1.152c3.696,0,3.792-0.528,3.792-2.256V3.744   c0-1.728-0.096-2.256-3.792-2.256H0V0h32.787v1.488h-1.152c-3.696,0-3.792,0.528-3.792,2.256V28.898z")).fill("black"),
f=(new k.Rect(0,0,0,0)).fill("transparent"),g=new k.Group,h=null;g.addShape(f);g.addShape(d);d.scale(1.6);this.addOperatorShape(g);h=d.getFixRenderBox();"inline"===this.displayType?(d.translate(5,15),f.setSize(h.width+10,h.height+25)):(d.translate(2,5),f.setSize(h.width+4,h.height+8));return g}})}},60:{value:function(){var k=j.r(45),l=2*Math.PI/360,d=Math.sin(15*l),f=Math.cos(15*l),g=Math.tan(15*l);return k.createClass("RadicalOperator",{base:j.r(55),constructor:function(){this.callBase("Radical")},
applyOperand:function(h,a){var b;b=new k.Path;var e=h.getHeight()/3,c=b.getDrawer();c.moveTo(0,6*f);c.lineBy(1*d,1*f);c.lineBy(3*f,3*-d);c.lineBy(g*e,e);c.lineBy(3*d,3*-f);c.lineBy(-d*e,-e);c.close();b=b.fill("black");var e=new k.Path,c=0.9*h.getHeight(),j=e.getDrawer();j.moveTo(g*c,0);j.lineTo(0,c);j.lineBy(3*d,3*f);j.lineBy(g*c+3*d,-(c+3*f));j.close();e=e.fill("black");c=h.getWidth()+2;c=(new k.Rect(c,2)).fill("black");this.addOperatorShape(b);this.addOperatorShape(e);this.addOperatorShape(c);var j=
b.getFixRenderBox(),l=e.getFixRenderBox();e.translate(j.width-3*d,0);b.translate(0,l.height-j.height);l=e.getFixRenderBox();c.translate(l.x+l.width-1/f,0);b=l.x+l.width-1/f;var e=this.operatorShape,c=null,l=j=0,R=e.getFixRenderBox();a.scale(0.66);c=a.getFixRenderBox();0<c.width&&0<c.height&&(l=c.height-R.height/2,0>l&&(a.translate(0,-l),l=0),j=c.width+R.height/2*g-b);e.translate(j,l);h.translate(j+b+1,l+2);this.parentExpression.expand(0,10);this.parentExpression.translateElement(0,5)}})}},61:{value:function(){var k=
j.r(45),l=j.r(49);return k.createClass("ScriptOperator",{base:j.r(55),constructor:function(d){this.callBase(d||"Script")},applyOperand:function(d,f,g){var h=this.parentExpression,d=(new l(this,d,f,g)).applySide();this.getOperatorShape();d&&h.setOffset(d.top,d.bottom);h.expand(4,2);h.translateElement(2,1)}})}},62:{value:function(){return j.r(45).createClass("SplitOperator",{base:j.r(55),constructor:function(){this.callBase("Split")},applyOperand:function(){var k=arguments,j=0,d=0,f=0,g=0,f=null,f=
k[0].getFixRenderBox(),j=f.width,d=f.height,f=k[1].getFixRenderBox(),f=f.height,g=d-f;k[1].translate(j,0);0<g?k[1].translate(0,g):k[0].translate(0,-g);for(var g=Math.max(d,f)+5,d=2,h=k.length;d<h;d++)f=k[d].getFixRenderBox(),k[d].translate(j,g),g+=f.height+5;this.parentExpression.expand(20,20);this.parentExpression.translateElement(10,10)}})}},63:{value:function(){var k=j.r(45),l=j.r(49);return k.createClass("SummationOperator",{base:j.r(55),constructor:function(){this.callBase("Summation");this.displayType=
"equation"},applyOperand:function(d,f,g){var h=this.getOperatorShape(),a=d.getFixRenderBox(),b=(new l(this,h,f,g)).applyUpDown(),a=(b.height-b.top-b.bottom-a.height)/2;0<=a?d.translate(b.width+0,a+b.bottom):(a=-a,h.translate(0,a),f.translate(0,a),g.translate(0,a),d.translate(b.width+0,b.bottom));this.parentExpression.setOffset(b.top,b.bottom);this.parentExpression.expand(0,0);this.parentExpression.translateElement(0,0)},getOperatorShape:function(){var d=(new k.Path("M0.672,33.603c-0.432,0-0.648,0-0.648-0.264c0-0.024,0-0.144,0.24-0.432l12.433-14.569L0,0.96c0-0.264,0-0.72,0.024-0.792   C0.096,0.024,0.12,0,0.672,0h28.371l2.904,6.745h-0.6C30.531,4.8,28.898,3.72,28.298,3.336c-1.896-1.2-3.984-1.608-5.28-1.8   c-0.216-0.048-2.4-0.384-5.617-0.384H4.248l11.185,15.289c0.168,0.24,0.168,0.312,0.168,0.36c0,0.12-0.048,0.192-0.216,0.384   L3.168,31.515h14.474c4.608,0,6.96-0.624,7.464-0.744c2.76-0.72,5.305-2.352,6.241-4.848h0.6l-2.904,7.681H0.672z")).fill("black"),
f=(new k.Rect(0,0,0,0)).fill("transparent"),g=new k.Group,h=null;g.addShape(f);g.addShape(d);d.scale(1.6);this.addOperatorShape(g);h=d.getFixRenderBox();"inline"===this.displayType?(d.translate(5,15),f.setSize(h.width+10,h.height+25)):(d.translate(2,5),f.setSize(h.width+4,h.height+8));return g}})}},64:{value:function(){return j.r(45).createClass("TextcircledOperator",{base:j.r(55),constructor:function(){this.callBase("Textcircled")},setType:function(j){this.opType=j},applyOperand:function(){}})}},
65:{value:function(){var k=j.r(45),l=["M19.505,10.369H9.577c-2.88,0-7.489-1.872-7.993-9.721C1.512,0.288,1.224,0,0.792,0C0,0,0,0.576,0,1.368   c0,7.201,3.672,13.753,9.001,13.825h10.504V10.369z","M22.699,5.041c0.792-0.216,0.936-0.216,3.528-0.216h4.607C30.822,3.215,30.822,1.606,30.861,0h-5.713   c-3.313,0-4.537,0.576-6.841,2.88c-1.512,1.512-2.232,3.601-2.808,5.617C13.842,2.592,10.53,0,6.354,0H0v4.825h4.914   c2.808,0,5.112,0,7.489,2.88c2.088,2.52,2.232,5.256,2.304,6.84c0.072,0.36,0.36,0.648,0.792,0.648c0.72,0,0.72-0.432,0.792-1.152   C16.579,9.289,19.171,5.833,22.699,5.041z",
"M18.096,1.152c-0.288,4.537-2.592,8.065-6.265,9.001c-0.648,0.216-0.792,0.216-3.384,0.216H0.032   c-0.038,1.606-0.038,3.216-0.023,4.825h8.653c3.024,0,5.329,0,8.065-3.457c2.16-2.808,2.952-7.561,2.952-10.369   c0-0.792,0-1.368-0.792-1.368C18.167,0,18.167,0.432,18.096,1.152z"];return k.createClass("UnderbraceOperator",{base:j.r(55),constructor:function(){this.callBase("Underbrace")},applyOperand:function(d,f){var g=d.getFixRenderBox(),h=f.getFixRenderBox(),a=this.getOperatorShape(g.width),b=a.getFixRenderBox(),
e=0,c=Math.max(g.width,h.width,b.width);d.translate((c-g.width)/2,e);e+=g.height+5;a.translate((c-b.width)/2,e);e+=b.height;f.translate((c-h.width)/2,e)},getOperatorShape:function(d){var d=73>d?5:((d-73)/2|0)+6,f=0,g=(new k.Path(l[0])).fill("black"),h=(new k.Path(l[1])).fill("black"),a=(new k.Path(l[2])).fill("black"),b=(new k.Rect(d,5)).fill("black"),e=(new k.Rect(d,5)).fill("black"),c=[],j=new k.Group;j.addShape(g);j.addShape(h);j.addShape(a);j.addShape(b);j.addShape(e);this.addOperatorShape(j);
c[0]=g.getFixRenderBox();c[1]=h.getFixRenderBox();var m=c[0].height-5;g.translate(0,0);f+=c[0].width-2;b.translate(f,m);f+=d-2;h.translate(f,m);f+=c[1].width-2;e.translate(f,m);a.translate(f+(d-2),0);return j}})}},66:{value:function(){function k(a){a=d.Utils.extend({},g,a);if(!/^(https?:)?\/\//.test(a.path)){var b=a,e;e=a.path;var f=location.pathname.split("/");f.length-=1;f=f.join("/")+"/";e=[location.protocol,"//",location.host,f,e.replace(/^\//,"")].join("");b.path=e}(new h(document,a.path)).mount(l)}
function l(){b=!0;d.Utils.each(f,function(b){b(a)})}var d=j.r(45),f=[],g=j.r(68).resource,h=j.r(34),a=j.r(42),b=!1,e=!1;return{ready:function(c,d){e||(e=!0,k(d));b?window.setTimeout(function(){c(a)},0):f.push(c)}}}},67:{value:function(){var k=j.r(45),l=j.r(6);return k.createClass("SignGroup",{base:k.Group,constructor:function(){this.callBase();this.box=new k.Rect(0,0,0,0);this.type=l.UNKNOWN;this.addShape(this.box);this.zoom=1},setZoom:function(d){this.zoom=d},getZoom:function(){return this.zoom},
setBoxSize:function(d,f){return this.box.setSize(d,f)},setBoxWidth:function(d){return this.box.setWidth(d)},setBoxHeight:function(d){return this.box.setHeight(d)},getType:function(){return this.type},getBaseHeight:function(){return this.getHeight()},getBaseWidth:function(){return this.getWidth()},addedCall:function(){}})}},68:{value:function(){return{zoom:0.66,font:{meanline:Math.round(19),baseline:Math.round(40),baseHeight:50,list:[j.r(40),j.r(38),j.r(39),j.r(36),j.r(37),j.r(41)]},resource:{path:"src/resource/"},
func:{"ud-script":{lim:!0}}}}},69:{value:function(){window.kf={ResourceManager:j.r(66),Operator:j.r(55),Expression:j.r(31),CompoundExpression:j.r(29),TextExpression:j.r(32),EmptyExpression:j.r(30),CombinationExpression:j.r(13),FunctionExpression:j.r(15),FractionExpression:j.r(14),IntegrationExpression:j.r(17),RadicalExpression:j.r(23),ScriptExpression:j.r(24),SuperscriptExpression:j.r(9),SubscriptExpression:j.r(8),SummationExpression:j.r(26),CasesExpression:j.r(12),HatExpression:j.r(16),TextcircledExpression:j.r(27),
ProductExpression:j.r(22),PmodExpression:j.r(21),OverlineExpression:j.r(19),MatrixExpression:j.r(18),SplitExpression:j.r(25),OverparenExpression:j.r(20),BracketsExpression:j.r(11),UnderbraceExpression:j.r(28)}}}},W={"kf.start":69};(function(){kity.extendClass(kity.Shape,{getFixRenderBox:function(){return this.getRenderBox(this.container.container)},getTranslate:function(){return this.transform.translate}});try{j.r([W["kf.start"]])}catch(k){}})(this)})();